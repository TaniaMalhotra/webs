<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>WordPress &#8211; CSS-Tricks</title>
	<atom:link href="https://css-tricks.com/tag/wordpress/feed/" rel="self" type="application/rss+xml" />
	<link>https://css-tricks.com</link>
	<description>Tips, Tricks, and Techniques on using Cascading Style Sheets.</description>
	<lastBuildDate>Mon, 15 Jun 2020 14:37:50 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.4.2</generator>
<site xmlns="com-wordpress:feed-additions:1">45537868</site>	<item>
		<title>Adding a Custom Welcome Guide to the WordPress Block Editor</title>
		<link>https://css-tricks.com/adding-a-custom-welcome-guide-to-the-wordpress-block-editor/</link>
					<comments>https://css-tricks.com/adding-a-custom-welcome-guide-to-the-wordpress-block-editor/#respond</comments>
		
		<dc:creator><![CDATA[Leonardo Losoviz]]></dc:creator>
		<pubDate>Mon, 15 Jun 2020 14:37:48 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[gutenberg]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=312604</guid>

					<description><![CDATA[<p>I am creating a WordPress plugin and there is a slight learning curve when it comes to using it. I’d like to give users a primer on how to use the plugin, but I want to avoid diverting users to documentation on the plugin&#8217;s website since that takes them out of the experience.</p>
<p>What would be great is for users to immediately start using the plugin once it’s installed but have access to helpful tips while they are actively using &#8230; <a href="https://css-tricks.com/adding-a-custom-welcome-guide-to-the-wordpress-block-editor/" class="read-more">Read article <span class="screen-reader-text"> &#8220;Adding a Custom Welcome Guide to the WordPress Block Editor&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/adding-a-custom-welcome-guide-to-the-wordpress-block-editor/">Adding a Custom Welcome Guide to the WordPress Block Editor</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>I am creating a WordPress plugin and there is a slight learning curve when it comes to using it. I’d like to give users a primer on how to use the plugin, but I want to avoid diverting users to documentation on the plugin&#8217;s website since that takes them out of the experience.</p>



<p>What would be great is for users to immediately start using the plugin once it’s installed but have access to helpful tips while they are actively using it. There’s no native feature for something like this in WordPress but we can make something because WordPress is super flexible like that.</p>



<p>So here’s the idea. We’re going to bake documentation directly into the plugin and make it easily accessible in the block editor. This way, users get to use the plugin right away while having answers to common questions directly where they’re working.&nbsp;</p>



<span id="more-312604"></span>



<p>My plugin operates through several Custom Post Types (CPT). What we’re going to build is essentially a popup modal that users get when they go to these CPTs.&nbsp;</p>



<p>The WordPress block editor is built in React, which utilizes components that can be customized to and reused for different situations. &nbsp;That is the case with what we’re making — let’s call it the <code>&lt;Guide&gt;</code> component — which behaves like a modal, but is composed of several pages that the user can paginate through.</p>



<p>WordPress itself has a <code>&lt;Guide&gt;</code>&nbsp;component that displays a welcome guide when opening the block editor for the first time:</p>



<figure class="wp-block-image size-full"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-3.jpeg?ssl=1" alt="Screenshot showing a modal on top of the WordPress block editor welcoming users to the editor for the first time." class="wp-image-312605" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-3.jpeg?w=1172&amp;ssl=1 1172w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-3.jpeg?resize=300%2C224&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-3.jpeg?resize=1024%2C765&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-3.jpeg?resize=768%2C574&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-3.jpeg?resize=1000%2C747&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /><figcaption>WordPress displays a modal with instructions for using the block editor when a user loads the editor for the first time.</figcaption></figure>



<p>The guide is a container filled with content that’s broken up into individual pages. In other words, it’s pretty much what we want. That means we don’t have to re-invent the wheel with this project; we can reuse this same concept for our own plugin.</p>



<p>Let’s do exactly that.&nbsp;</p>



<h3>What we want to achieve</h3>



<p>Before we get to the solution, let’s talk about the end goal.</p>



<p>The design satisfies the requirements of the plugin, which is a GraphQL server for WordPress. The plugin offers a variety of CPTs that are edited through custom blocks which, in turn, are <a href="https://developer.wordpress.org/block-editor/developers/block-api/block-templates/">defined through templates</a>. There’s a grand total of two blocks: one called &#8220;GraphiQL client&#8221; to input the GraphQL query, and one called &#8220;Persisted query options&#8221; to customize the behavior of the execution.</p>



<p>Since creating a query for GraphQL is not a trivial task, I decided to add the guide component to the editor screen for that CPT. It’s available in the Document settings as a panel called &#8220;Welcome Guide.&#8221;</p>



<figure class="wp-block-image size-full"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-4.jpeg?ssl=1" alt="Screenshot showing the WordPress editor with the document settings panel open in the right column. a welcome guide tab is highlighted in the settings." class="wp-image-312607" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-4.jpeg?w=1172&amp;ssl=1 1172w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-4.jpeg?resize=300%2C224&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-4.jpeg?resize=1024%2C765&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-4.jpeg?resize=768%2C574&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-4.jpeg?resize=1000%2C747&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /></figure>



<p>Crack that panel open and the user gets a link. That link is what will trigger the modal.</p>



<figure class="wp-block-image size-full is-resized"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-5.jpeg?resize=274%2C342&#038;ssl=1" alt="Close-up screenshot of the welcome guide tab opened, revealing a link that says &quot;Open Guide: Creating Persisted Queries.&quot;" class="wp-image-312609" width="274" height="342" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-5.jpeg?w=274&amp;ssl=1 274w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-5.jpeg?resize=240%2C300&amp;ssl=1 240w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /></figure>



<p>For the modal itself, I decided to display a tutorial video on using the CPT on the first page, and then describe in detail all the options available in the CPT on subsequent pages.</p>



<figure class="wp-block-image size-full"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-6.jpeg?ssl=1" alt="Screenshot showing the custom modal open in the block editor and containing an embedded video on how to use the plugin." class="wp-image-312611" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-6.jpeg?w=1172&amp;ssl=1 1172w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-6.jpeg?resize=300%2C224&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-6.jpeg?resize=1024%2C765&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-6.jpeg?resize=768%2C574&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-6.jpeg?resize=1000%2C747&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /></figure>



<p>I believe this layout is an effective way to show documentation to the user. It is out of the way, but still conveniently close to the action. Sure, we can use a different design or even place the modal trigger somewhere else using a different component instead of repurposing <code>&lt;Guide&gt;</code>, but this is perfectly good.</p>



<h3>Planning the implementation</h3>



<p>The implementation comprises the following steps:</p>



<ol><li>Scaffolding a new script to register the custom sidebar panel</li><li>Displaying the custom sidebar panel on the editor for our Custom Post Type only</li><li>Creating the guide</li><li>Adding content to the guide</li></ol>



<p>Let&#8217;s start!</p>



<h3>Step 1: Scaffolding the script</h3>



<p>Starting in WordPress 5.4, we can use a component called <a href="https://developer.wordpress.org/block-editor/developers/slotfills/plugin-document-setting-panel/"><code>&lt;PluginDocumentSettingPanel&gt;</code></a> to add a <a href="https://developer.wordpress.org/block-editor/components/panel/">panel</a> on the editor&#8217;s Document settings like this:</p>



<pre rel="JSX" class="wp-block-csstricks-code-block language-jsx" data-line=""><code markup="tt">const { registerPlugin } = wp.plugins;
const { PluginDocumentSettingPanel } = wp.editPost;
 
const PluginDocumentSettingPanelDemo = () => (
  &lt;PluginDocumentSettingPanel
    name="custom-panel"
    title="Custom Panel"
    className="custom-panel"
  >
    Custom Panel Contents
  &lt;/PluginDocumentSettingPanel>
);
registerPlugin( 'plugin-document-setting-panel-demo', {
  render: PluginDocumentSettingPanelDemo,
  icon: 'palmtree',
} );</code></pre>



<p>If you&#8217;re experienced with the block editor and already know how to execute this code, then you can skip ahead. I&#8217;ve been coding with the block editor for less than three months, and using React/npm/webpack is a new world for me — this plugin is my first project using them! I&#8217;ve found that the docs in the <a href="https://github.com/WordPress/gutenberg">Gutenberg repo</a> are not always adequate for beginners like me, and sometimes the documentation is missing altogether, so I&#8217;ve had to dig into the source code to find answers.</p>



<p>When the documentation for the component indicates to use that piece of code above, I don&#8217;t know what to do next, because <code>&lt;PluginDocumentSettingPanel&gt;</code> is not a block and I am unable to scaffold a new block or add the code there. Plus, we’re working with JSX, which means we need to have a <a href="https://developer.wordpress.org/block-editor/tutorials/javascript/js-build-setup/">JavaScript build step</a> to compile the code.</p>



<p>I did, however, find the <a href="https://github.com/WordPress/gutenberg/blob/8efe9efa285ea3f76dda12700906b76ab14dc048/packages/edit-post/README.md#PluginDocumentSettingPanel">equivalent ES5 code</a>:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">var el = wp.element.createElement;
var __ = wp.i18n.__;
var registerPlugin = wp.plugins.registerPlugin;
var PluginDocumentSettingPanel = wp.editPost.PluginDocumentSettingPanel;
 
function MyDocumentSettingPlugin() {
  return el(
    PluginDocumentSettingPanel,
    {
      className: 'my-document-setting-plugin',
      title: 'My Panel',
    },
    __( 'My Document Setting Panel' )
  );
}
 
registerPlugin( 'my-document-setting-plugin', {
  render: MyDocumentSettingPlugin
} );</code></pre>



<p>ES5 code does not need be compiled, so we can load it like any other script in WordPress. But I don&#8217;t want to use that. I want the full, modern experience of ESNext and JSX.</p>



<p>So my thinking goes like this: I can&#8217;t use the <a href="https://css-tricks.com/how-to-create-custom-wordpress-editor-blocks-in-2020/">block scaffolding tools</a> since it&#8217;s not a block, and I don&#8217;t know how to compile the script (I&#8217;m certainly not going to set-up webpack all by myself). That means I&#8217;m stuck.</p>



<p>But wait! The only difference between a block and a regular script is just how they are registered in WordPress. A block is registered like this:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp_register_script($blockScriptName, $blockScriptURL, $dependencies, $version);
register_block_type('my-namespace/my-block', [
  'editor_script' => $blockScriptName,
]);</code></pre>



<p>And a regular script is registered like this:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp_register_script($scriptName, $scriptURL, $dependencies, $version);
wp_enqueue_script($scriptName);</code></pre>



<p>We can use any of the block scaffolding tools to modify things then register a regular script instead of a block, which gains us access to the webpack configuration to compile the ESNext code. Those available tools are:</p>



<ul><li>The <a href="https://github.com/wp-cli/scaffold-command#wp-scaffold-block">WP CLI</a> <a href="https://github.com/wp-cli/scaffold-command#wp-scaffold-block">‘scaffold’ command</a></li><li>Ahmad Awais&#8217;s <a href="https://github.com/ahmadawais/create-guten-block">create-guten-block</a> package</li><li>The official <a href="https://developer.wordpress.org/block-editor/packages/packages-create-block/">@wordpress/create-block</a> package</li></ul>



<p>I chose to use the <a href="https://developer.wordpress.org/block-editor/packages/packages-create-block/">@wordpress/create-block</a> package because it is maintained by the team developing Gutenberg.</p>



<p>To scaffold the block, <a href="https://developer.wordpress.org/block-editor/packages/packages-create-block/#usage">we execute this</a> in the command line:</p>



<pre rel="Terminal" class="wp-block-csstricks-code-block language-none" data-line=""><code markup="tt">npm init @wordpress/block</code></pre>



<p>After completing all the prompts for information — including the block’s name, title and description — the tool will generate a <a href="https://make.wordpress.org/meta/2019/03/08/the-block-directory-and-a-new-type-of-plugin/">single-block plugin</a>, with an entry PHP file containing code similar to this:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">/**
 * Registers all block assets so that they can be enqueued through the block editor
 * in the corresponding context.
 *
 * @see https://developer.wordpress.org/block-editor/tutorials/block-tutorial/applying-styles-with-stylesheets/
 */
function my_namespace_my_block_block_init() {
  $dir = dirname( __FILE__ );
 
  $script_asset_path = "$dir/build/index.asset.php";
  if ( ! file_exists( $script_asset_path ) ) {
    throw new Error(
      'You need to run `npm start` or `npm run build` for the "my-namespace/my-block" block first.'
    );
  }
  $index_js     = 'build/index.js';
  $script_asset = require( $script_asset_path );
  wp_register_script(
    'my-namespace-my-block-block-editor',
    plugins_url( $index_js, __FILE__ ),
    $script_asset['dependencies'],
    $script_asset['version']
  );
 
  $editor_css = 'editor.css';
  wp_register_style(
    'my-namespace-my-block-block-editor',
    plugins_url( $editor_css, __FILE__ ),
    array(),
    filemtime( "$dir/$editor_css" )
  );
 
  $style_css = 'style.css';
  wp_register_style(
    'my-namespace-my-block-block',
    plugins_url( $style_css, __FILE__ ),
    array(),
    filemtime( "$dir/$style_css" )
  );
 
  register_block_type( 'my-namespace/my-block', array(
    'editor_script' => 'my-namespace-my-block-block-editor',
    'editor_style'  => 'my-namespace-my-block-block-editor',
    'style'         => 'my-namespace-my-block-block',
  ) );
}
add_action( 'init', 'my_namespace_my_block_block_init' );</code></pre>



<p>We can copy this code into the plugin, and modify it appropriately, converting the block into a regular script. (Note that I&#8217;m also removing the CSS files along the way, but could keep them, if needed.)</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">function my_script_init() {
  $dir = dirname( __FILE__ );
 
  $script_asset_path = "$dir/build/index.asset.php";
  if ( ! file_exists( $script_asset_path ) ) {
    throw new Error(
      'You need to run `npm start` or `npm run build` for the "my-script" script first.'
    );
  }
  $index_js     = 'build/index.js';
  $script_asset = require( $script_asset_path );
  wp_register_script(
    'my-script',
    plugins_url( $index_js, __FILE__ ),
    $script_asset['dependencies'],
    $script_asset['version']
  );
  wp_enqueue_script(
    'my-script'
  );
}
add_action( 'init', 'my_script_init' );</code></pre>



<p>Let’s copy the <code>package.json</code> file over:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">{
  "name": "my-block",
  "version": "0.1.0",
  "description": "This is my block",
  "author": "The WordPress Contributors",
  "license": "GPL-2.0-or-later",
  "main": "build/index.js",
  "scripts": {
    "build": "wp-scripts build",
    "format:js": "wp-scripts format-js",
    "lint:css": "wp-scripts lint-style",
    "lint:js": "wp-scripts lint-js",
    "start": "wp-scripts start",
    "packages-update": "wp-scripts packages-update"
  },
  "devDependencies": {
    "@wordpress/scripts": "^9.1.0"
  }
}</code></pre>



<p>Now, we can replace the contents of file <code>src/index.js</code> with the ESNext code from above to register the <code>&lt;PluginDocumentSettingPanel&gt;</code> component. Upon running <code>npm start</code> (or <code>npm run build</code> for production) the code will be compiled into <code>build/index.js</code>.</p>



<p>There is a last problem to solve: the <code>&lt;PluginDocumentSettingPanel&gt;</code> component is not statically imported, but instead obtained from <code>wp.editPost</code>, and since <code>wp</code> is a global variable loaded by WordPress on runtime, this dependency is not present in <code>index.asset.php</code> (which is auto-generated during build). We must manually add a dependency to the <code>wp-edit-post</code> script when registering the script to make sure it loads before ours:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">$dependencies = array_merge(
  $script_asset['dependencies'],
  [
    'wp-edit-post',
  ]
);
wp_register_script(
  'my-script',
  plugins_url( $index_js, __FILE__ ),
  $dependencies,
  $script_asset['version']
);</code></pre>



<p>Now the script setup is ready!</p>



<p class="explanation">The plugin can be updated with Gutenberg&#8217;s relentless development cycles. Run <code>npm run packages-update</code> to update the npm dependencies (and, consequently, the <a href="https://github.com/WordPress/gutenberg/blob/master/packages/scripts/config/webpack.config.js">webpack configuration</a>, which is defined on package <code>"@wordpress/scripts"</code>) to their latest supported versions.</p>



<p>At this point, you might be wondering how I knew to add a dependency to the <code>"wp-edit-post"</code> script before our script. Well, I had to dig into Gutenberg&#8217;s source code. The documentation for <code>&lt;PluginDocumentSettingPanel&gt;</code> is somewhat incomplete, which is a perfect example of how Gutenberg&#8217;s documentation is lacking in certain places.</p>



<p>While digging in code and browsing documentation, I discovered a few enlightening things. For example, there are two ways to code our scripts: using either the ES5 or the ESNext syntax. ES5 doesn&#8217;t require a build process, and it references instances of code from the runtime environment, most likely through the global <code>wp</code> variable. For instance, the code to create an icon goes like this:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">var moreIcon = wp.element.createElement( 'svg' );</code></pre>



<p>ESNext relies on webpack to resolve all dependencies, which enables us to import static components. For instance, the code to create an icon would be:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">import { more } from '@wordpress/icons';</code></pre>



<p>This applies pretty much everywhere. However, that&#8217;s not the case for the <code>&lt;PluginDocumentSettingPanel&gt;</code> component, which <a href="https://github.com/WordPress/gutenberg/blob/8efe9efa285ea3f76dda12700906b76ab14dc048/packages/edit-post/README.md#PluginDocumentSettingPanel">references the runtime environment for ESNext</a>:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">const { PluginDocumentSettingPanel } = wp.editPost;</code></pre>



<p>That&#8217;s why we have to add a dependency to the &#8220;wp-edit-post&#8221; script. That’s where the wp.editPost variable is defined.</p>



<p>If <code>&lt;PluginDocumentSettingPanel&gt;</code> could be directly imported, then the dependency to &#8220;wp-edit-post&#8221; would be automatically handled by the block editor through the <a href="https://github.com/WordPress/gutenberg/tree/master/packages/dependency-extraction-webpack-plugin">Dependency Extraction Webpack Plugin</a>. This plugin builds the bridge from static to runtime by creating a <code>index.asset.php</code> file containing all the dependencies for the runtime environment scripts, which are obtained by <a href="https://github.com/WordPress/gutenberg/blob/dd9f4544330be4aa32beb96c13a9ad9268c7e573/packages/dependency-extraction-webpack-plugin/util.js#L72">replacing <code>"@wordpress/"</code> from the package name with <code>"wp-"</code></a>. Hence, the <code>"@wordpress/edit-post"</code> package &nbsp;becomes the <code>"wp-edit-post"</code> runtime script. That&#8217;s how I figured out which script to add the dependency.</p>



<h3><strong>Step 2: Blacklisting the custom sidebar panel on all other CPTs&nbsp;</strong></h3>



<p>The panel will display documentation for a specific CPT, so it must be registered only to that CPT. That means we need to blacklist it from appearing on any other post types.</p>



<p>Ryan Welcher (who created the <code>&lt;PluginDocumentSettingPanel&gt;</code> component) <a href="https://ryanwelcher.com/2020/02/restricting-plugindocumentsettingpanel-by-post-type/">describes this process</a> when registering the panel:</p>



<pre rel="JSX" class="wp-block-csstricks-code-block language-jsx" data-line=""><code markup="tt">const { registerPlugin } = wp.plugins;
const { PluginDocumentSettingPanel } = wp.editPost
const { withSelect } = wp.data;
 
const MyCustomSideBarPanel = ( { postType } ) => {
 
  if ( 'post-type-name' !== postType ) {
    return null;
  }
 
  return(
    &lt;PluginDocumentSettingPanel
      name="my-custom-panel"
      title="My Custom Panel"
    >
      Hello, World!
    &lt;/PluginDocumentSettingPanel>
  );
}
 
const CustomSideBarPanelwithSelect = withSelect( select => {
  return {
    postType: select( 'core/editor' ).getCurrentPostType(),
  };
} )( MyCustomSideBarPanel);
 
 
registerPlugin( 'my-custom-panel', { render: CustomSideBarPanelwithSelect } );</code></pre>



<p>He also suggests an alternative solution, using <code>useSelect</code> instead of <code>withSelect</code>.</p>



<p>That said, I&#8217;m not totally convinced by this solution, because the JavaScript file must still be loaded, even if it isn’t needed, forcing the website to take a performance hit. Doesn&#8217;t it make more sense to <em>not</em> register the JavaScript file than it does to run JavaScript just to disable JavaScript?</p>



<p>I have created a PHP solution. I’ll admit that it feels a bit hacky, but it works well. First, we find out which post type is related to the object being created or edited:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">function get_editing_post_type(): ?string
{
  if (!is_admin()) {
    return null;
  }
 
  global $pagenow;
  $typenow = '';
  if ( 'post-new.php' === $pagenow ) {
    if ( isset( $_REQUEST['post_type'] ) &amp;&amp; post_type_exists( $_REQUEST['post_type'] ) ) {
      $typenow = $_REQUEST['post_type'];
    };
  } elseif ( 'post.php' === $pagenow ) {
    if ( isset( $_GET['post'] ) &amp;&amp; isset( $_POST['post_ID'] ) &amp;&amp; (int) $_GET['post'] !== (int) $_POST['post_ID'] ) {
      // Do nothing
    } elseif ( isset( $_GET['post'] ) ) {
      $post_id = (int) $_GET['post'];
    } elseif ( isset( $_POST['post_ID'] ) ) {
      $post_id = (int) $_POST['post_ID'];
    }
    if ( $post_id ) {
      $post = get_post( $post_id );
      $typenow = $post->post_type;
    }
  }
  return $typenow;
}</code></pre>



<p>Then, ,we register the script only if it matches our CPT:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">add_action('init', 'maybe_register_script');
function maybe_register_script()
{
  // Check if this is the intended custom post type
  if (get_editing_post_type() != 'my-custom-post-type') {
    return;
  }
 
  // Only then register the block
  wp_register_script(...);
  wp_enqueue_script(...);
}</code></pre>



<p class="explanation"><a href="https://www.designbombs.com/registering-gutenberg-blocks-for-custom-post-type/">Check out this post</a> for a deeper dive on how this works.</p>



<h3>Step 3: Creating the custom guide</h3>



<p>I designed the functionality for my plugin’s guide based on the WordPress <code>&lt;Guide&gt;</code> component. I didn’t realize I’d be doing that at first, so here’s how I was able to figure that out.</p>



<ol><li>Search the <a href="https://github.com/WordPress/gutenberg">source code</a> to see how it was done there.</li><li>Explore the catalogue of all available components in <a href="https://wordpress.github.io/gutenberg">Gutenberg&#8217;s Storybook</a>.</li></ol>



<p>First, I copied content from the block editor modal and did a basic search. <a href="https://github.com/WordPress/gutenberg/search?q=%22In+the+WordPress+editor%22&amp;type=">The results</a> pointed me to <a href="https://github.com/WordPress/gutenberg/blob/7b63e877336bb8f156bcd25191066bad38ba6635/packages/edit-post/src/components/welcome-guide/index.js">this file</a>. From there I discovered the component is called <code>&lt;Guide&gt;</code> and could simply copy and paste its code to my plugin as a base for my own guide.</p>



<p>Then I looked for the component&#8217;s documentation. I browsed the <a href="https://github.com/WordPress/gutenberg/tree/master/packages/components">@wordpress/components</a> package (which, as you may have guessed, is where components are implemented) and found <a href="https://github.com/WordPress/gutenberg/blob/master/packages/components/src/guide/README.md">the component’s README file</a>. That gave me all the information I needed to implement my own custom guide component.</p>



<p>I also explored the catalogue of all the available components in <a href="https://wordpress.github.io/gutenberg">Gutenberg&#8217;s Storybook</a> (which actually shows that these components can be used outside the context of WordPress). Clicking on all of them, I finally discovered <a href="https://wordpress.github.io/gutenberg/?path=/story/components-guide--default"><code>&lt;Guide&gt;</code></a>. The storybook provides the source code for several examples (or stories). It’s a handy resource for understanding how to customize a component through props.</p>



<p>At this point, I knew <code>&lt;Guide&gt;</code> would make a solid base for my component. There is one missing element, though: how to trigger the guide on click. I had to rack my brain for this one!</p>



<p>This is a button with a listener that opens the modal on click:</p>



<pre rel="JSX" class="wp-block-csstricks-code-block language-jsx" data-line=""><code markup="tt">import { useState } from '@wordpress/element';
import { Button } from '@wordpress/components';
import { __ } from '@wordpress/i18n';
import MyGuide from './guide';
 
const MyGuideWithButton = ( props ) => {
  const [ isOpen, setOpen ] = useState( false );
  return (
    &lt;>
      &lt;Button onClick={ () => setOpen( true ) }>
        { __('Open Guide: “Creating Persisted Queries”') }
      &lt;/Button>
      { isOpen &amp;&amp; (
        &lt;MyGuide 
          { ...props }
          onFinish={ () => setOpen( false ) }
        />
      ) }
    &lt;/>
  );
};
export default MyGuideWithButton;</code></pre>



<p>Even though the block editor tries to hide it, we are operating within React. Until now, we’ve been dealing with JSX and components. But now we need the <a href="https://reactjs.org/docs/hooks-state.html"><code>useState</code> hook</a>, which is specific to React.</p>



<p>I&#8217;d say that having a good grasp of React is required if you want to master the WordPress block editor. There is no way around it.</p>



<h3>Step 4: Adding content to the guide</h3>



<p>We’re almost there! Let’s create the <code>&lt;Guide&gt;</code> component, containing a <code>&lt;GuidePage&gt;</code> component for each page of content.</p>



<p>The content can use HTML, include other components, and whatnot. In this particular case, I have added three <code>&lt;GuidePage&gt;</code> instances for my CPT just using HTML. The first page includes a video tutorial and the next two pages contain detailed instructions.</p>



<pre rel="JSX" class="wp-block-csstricks-code-block language-jsx" data-line=""><code markup="tt">import { Guide, GuidePage } from '@wordpress/components';
import { __ } from '@wordpress/i18n';
 
const MyGuide = ( props ) => {
  return (
    &lt;Guide { ...props } >
      &lt;GuidePage>
        &lt;video width="640" height="400" controls>
          &lt;source src="https://d1c2lqfn9an7pb.cloudfront.net/presentations/graphql-api/videos/graphql-api-creating-persisted-query.mov" type="video/mp4" />
          { __('Your browser does not support the video tag.') }
        &lt;/video>
        // etc.
      &lt;/GuidePage>
      &lt;GuidePage>
        // ...
      &lt;/GuidePage>
      &lt;GuidePage>
        // ...
      &lt;/GuidePage>
    &lt;/Guide>
  )
}
export default MyGuide;</code></pre>



<figure class="wp-block-image size-full"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-1.gif?ssl=1" alt="imaged gif showing the mouse cursor clicking on the Open Guide link in the block editor's document settings, which opens the custom welcome guide containing a video with links to other pages in the modal." class="wp-image-312613" data-recalc-dims="1"/><figcaption>Hey look, we have our own guide now!</figcaption></figure>



<p>Not bad! There are a few issues, though:</p>



<ul><li>I couldn&#8217;t embed the video inside the <code>&lt;Guide&gt;</code> because clicking the play button closes the guide. I assume that’s because the <code>&lt;iframe&gt;</code> falls outside the boundaries of the guide. I wound up uploading the video file to S3 and serving with <code>&lt;video&gt;</code>.</li><li>The page transition in the guide is not very smooth. The block editor’s modal looks alright because all pages have a similar height, but the transition in this one is pretty abrupt.</li><li>The hover effect on buttons could be improved. Hopefully, the Gutenberg team needs to fix this for their own purposes, because my CSS aren’t there. It’s not that my skills are bad; they are nonexistent.</li></ul>



<p>But I can live with these issues. Functionality-wise, I&#8217;ve achieved what I need the guide to do.</p>



<h3>Bonus: Opening docs independently&nbsp;</h3>



<p>For our <code>&lt;Guide&gt;</code>, we created the content of each <code>&lt;GuidePage&gt;</code> component directly using HTML. However, if this HTML code is instead added through an autonomous component, then it can be reused for other user interactions.</p>



<p>For instance, the component <code>&lt;CacheControlDescription&gt;</code> displays a description concerning HTTP caching:</p>



<pre rel="JSX" class="wp-block-csstricks-code-block language-jsx" data-line=""><code markup="tt">const CacheControlDescription = () => {
  return (
    &lt;p>The Cache-Control header will contain the minimum max-age value from all fields/directives involved in the request, or "no-store" if the max-age is 0&lt;/p>
  )
}
export default CacheControlDescription;</code></pre>



<p>This component can be added inside a <code>&lt;GuidePage&gt;</code> as we did before, but also within a <code>&lt;Modal&gt;</code> component:</p>



<pre rel="JSX" class="wp-block-csstricks-code-block language-jsx" data-line=""><code markup="tt">import { useState } from '@wordpress/element';
import { Button } from '@wordpress/components';
import { __ } from '@wordpress/i18n';
import CacheControlDescription from './cache-control-desc';
 
const CacheControlModalWithButton = ( props ) => {
  const [ isOpen, setOpen ] = useState( false );
  return (
    &lt;>
      &lt;Button 
        icon="editor-help"
        onClick={ () => setOpen( true ) }
      />
      { isOpen &amp;&amp; (
        &lt;Modal 
          { ...props }
          onRequestClose={ () => setOpen( false ) }
        >
          &lt;CacheControlDescription />
        &lt;/Modal>
      ) }
    &lt;/>
  );
};
export default CacheControlModalWithButton;</code></pre>



<p>To provide a good user experience, we can offer to show the documentation only when the user is interacting with the block. For that, we show or hide the button depending on the value of <code>isSelected</code>:</p>



<pre rel="JSX" class="wp-block-csstricks-code-block language-jsx" data-line=""><code markup="tt">import { __ } from '@wordpress/i18n';
import CacheControlModalWithButton from './modal-with-btn';
 
const CacheControlHeader = ( props ) => {
  const { isSelected } = props;
  return (
    &lt;>
      { __('Cache-Control max-age') }
      { isSelected &amp;&amp; (
        &lt;CacheControlModalWithButton />
      ) }
    &lt;/>
  );
}
export default CacheControlHeader;</code></pre>



<p>Finally, the <code>&lt;CacheControlHeader&gt;</code> component is added to the appropriate control.</p>



<figure class="wp-block-image size-full"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/06/image-2.gif?ssl=1" alt="Animated gif showing the option to view a guide displaying when a block is selected in the editor." class="wp-image-312615" data-recalc-dims="1"/></figure>



<h3>Tadaaaaaaaa &#x1f389;</h3>



<p>The WordPress block editor is quite a piece of software! I was able to accomplish things with it that I would have been unable to without it. Providing documentation to the user may not be the shiniest of examples or use cases, but it&#8217;s a very practical one and something that’s relevant for many other plugins. Want to use it for your own plugin? Go for it!</p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/adding-a-custom-welcome-guide-to-the-wordpress-block-editor/">Adding a Custom Welcome Guide to the WordPress Block Editor</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/adding-a-custom-welcome-guide-to-the-wordpress-block-editor/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">312604</post-id>	</item>
		<item>
		<title>WordPress Block Transforms</title>
		<link>https://css-tricks.com/wordpress-block-transforms/</link>
					<comments>https://css-tricks.com/wordpress-block-transforms/#respond</comments>
		
		<dc:creator><![CDATA[Chris Coyier]]></dc:creator>
		<pubDate>Tue, 19 May 2020 23:52:58 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[WordPress]]></category>
		<category><![CDATA[WordPress blocks]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=311071</guid>

					<description><![CDATA[<p>This has been the year of Gutenberg for us here at CSS-Tricks. In fact, that&#8217;s <a href="https://css-tricks.com/thank-you-2019-edition/#article-header-id-8">a goal we set</a> at the end of last year. We&#8217;re much further along that I thought we&#8217;d be, authoring all <em>new</em> content in the block editor<a href="#fn:1">¹</a>, enabling the block editor for <em>all</em> content now. That means when we open most old posts, we see all the content in the &#8220;Classic&#8221; block. It looks like this:</p>
<p>A post written on CSS-Tricks before we&#8230; <a href="https://css-tricks.com/wordpress-block-transforms/" class="read-more">Read article <span class="screen-reader-text"> &#8220;WordPress Block Transforms&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/wordpress-block-transforms/">WordPress Block Transforms</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>This has been the year of Gutenberg for us here at CSS-Tricks. In fact, that&#8217;s <a href="https://css-tricks.com/thank-you-2019-edition/#article-header-id-8">a goal we set</a> at the end of last year. We&#8217;re much further along that I thought we&#8217;d be, authoring all <em>new</em> content in the block editor<a href="#fn:1">¹</a>, enabling the block editor for <em>all</em> content now. That means when we open most old posts, we see all the content in the &#8220;Classic&#8221; block. It looks like this:</p>



<span id="more-311071"></span>



<figure class="wp-block-image size-large is-resized"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.49.48-PM.png?fit=1024%2C821&amp;ssl=1" alt="" class="wp-image-311072" width="506" height="405" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.49.48-PM.png?w=1258&amp;ssl=1 1258w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.49.48-PM.png?resize=300%2C240&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.49.48-PM.png?resize=1024%2C821&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.49.48-PM.png?resize=768%2C615&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.49.48-PM.png?resize=1000%2C801&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>A post written on CSS-Tricks before we were using the block editor. </figcaption></figure>



<p>The entire contents of the post is in a single block, so not exactly making any use of the block editor. It&#8217;s still &#8220;visual,&#8221; like the block editor, but it&#8217;s more like the old visual editor using TinyMCE. I never used that as it kinda forcefully mangled HTML in a way I didn&#8217;t like.</p>



<h3>This is the #1 thing I was worried about</h3>



<p>Transforming a Classic block into new blocks is as trivial as selecting the Classic block and selecting the &#8220;Convert to Blocks&#8221; option.</p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/05/wordpress-convert-to-blocks.png?fit=1024%2C745&amp;ssl=1" alt="" class="wp-image-311259" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/05/wordpress-convert-to-blocks.png?w=1892&amp;ssl=1 1892w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/05/wordpress-convert-to-blocks.png?resize=300%2C218&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/05/wordpress-convert-to-blocks.png?resize=1024%2C745&amp;ssl=1 1024w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/05/wordpress-convert-to-blocks.png?resize=768%2C559&amp;ssl=1 768w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/05/wordpress-convert-to-blocks.png?resize=1536%2C1117&amp;ssl=1 1536w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/05/wordpress-convert-to-blocks.png?resize=1000%2C727&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>Select the option and the one block becomes many blocks.</figcaption></figure>



<p> How does the block editor handle block-izing old content, when we tell it to do that from the &#8220;Convert to Blocks&#8221; option? What if it totally screws up content during the conversion? Will we <em>ever</em> be able to switch?</p>



<p>The answer: <em>it does a pretty darn good job.</em> But&#8230; there are still issues. Not &#8220;bugs&#8221; but situations where we have custom HTML in our old content and it doesn&#8217;t know what to do with it — let alone how to convert it into exactly the blocks we wish it would. There is a way! </p>



<h3>Basic Block Transforms</h3>



<p>That&#8217;s where this idea of &#8220;Block Transforms&#8221; comes in. All (well, most?) native blocks have &#8220;to&#8221; and &#8220;from&#8221; transformations. You&#8217;re probably already familiar with how it manifests in the UI. Like a paragraph can transform &#8220;to&#8221; a quote and vice versa. Here&#8217;s a super meta screenshot of this very paragraph:</p>



<figure class="wp-block-image size-large is-resized"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.58.15-PM.png?fit=1024%2C506&amp;ssl=1" alt="" class="wp-image-311074" width="497" height="245" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.58.15-PM.png?w=1438&amp;ssl=1 1438w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.58.15-PM.png?resize=300%2C148&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.58.15-PM.png?resize=1024%2C506&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.58.15-PM.png?resize=768%2C379&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/05/Screen-Shot-2020-05-13-at-8.58.15-PM.png?resize=1000%2C494&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>Those transforms aren&#8217;t magic; they are very explicitly coded. When you register a block, you specify the transforms. Say you were registering your own custom code block. You&#8217;d want to make sure that you could transform it&#8230;</p>



<ul><li><strong>From</strong> and to the default built-in code block, and probably a handful of others that might be useful.</li><li>Back <strong>to</strong> the built-in code block.</li></ul>



<p>Which might look like:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">registerBlockType("my/code-block", {
  title: __("My Code Block"),
  ...
  transforms: {
    from: [
      {
        type: "block",
        priority: 7,
        blocks: ["core/code", "core/paragraph", "core/preformatted"],
        transform: function (attributes) {
          return createBlock("my/code-block", {
            content: attributes.content,
          });
        },
      },
    ],
    to: [
      {
        type: "block",
        blocks: ["core/code"],
        transform: ({ content }) => createBlock("core/code", { content }),
      },
    ],
   
   ...</code></pre>



<p>Those are transforms <strong>to and from other blocks</strong>. Fortunately, this is a pretty simple block where we&#8217;re just shuffling the <code>content</code> around. More complex blocks might need to pass around more data, but I haven&#8217;t had to deal with that yet. </p>



<h3>The more magical stuff: Block Transforms from raw code</h3>



<p>Here&#8217;s the moment of truth for old content:</p>



<figure class="wp-block-image size-large is-resized"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/CleanShot-2020-05-13-at-21.07.44@2x.png?fit=1024%2C751&amp;ssl=1" alt="" class="wp-image-311075" width="412" height="301" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/CleanShot-2020-05-13-at-21.07.44@2x.png?w=1162&amp;ssl=1 1162w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/CleanShot-2020-05-13-at-21.07.44@2x.png?resize=300%2C220&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/CleanShot-2020-05-13-at-21.07.44@2x.png?resize=1024%2C751&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/CleanShot-2020-05-13-at-21.07.44@2x.png?resize=768%2C563&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/05/CleanShot-2020-05-13-at-21.07.44@2x.png?resize=1000%2C733&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>The &#8220;Convert to Blocks&#8221; option.</figcaption></figure>



<p>In this situation, blocks are being created not from other blocks, but from raw code. Quite literally, the HTML is being looked at and choices are being made about what blocks to make from chunks of that HTML. This is where it&#8217;s amazing the block editor does such a good job with the choices, and also where things can go wrong and it can fail, make wrong block choices, or mangle content. </p>



<p>In our old content, a block of code (<em>a super very important</em> thing) in a post would look like this:</p>



<pre rel="HTML" class="wp-block-csstricks-code-block language-markup" data-line=""><code markup="tt">&lt;pre rel="JavaScript">&lt;code class="language-javascript" markup="tt">
  let html = `&lt;div>cool&lt;/div>`;
&lt;/code>&lt;/pre></code></pre>



<p>Sometimes the block conversion would do OK on those, turning it into a native code block. But there were a number of problems:</p>



<ol><li>I don&#8217;t want a native code block. I want that to be transformed into our own <em>new</em> code block (<a href="https://css-tricks.com/gutenberging/">blogged about that here</a>). </li><li>I need some of the information in those attributes to inform settings on the new block, like what kind of code it is.</li><li>The HTML in our old code blocks was <em>not escaped</em> and I need it to not choke on that. </li></ol>



<p>I don&#8217;t have all the answers here, as this is an evolving process, but I do have some block transforms in place now that are working pretty well. Here&#8217;s what a &#8220;raw&#8221; transform (as opposed to a &#8220;block&#8221; transform) looks like:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line="14"><code markup="tt">registerBlockType("my/code-block", {
  title: __("My Code Block"),
  // ...
  transforms: {
    from: [
      {
        type: "block",
        priority: 7,
        // ...
      },
      {
        type: "raw",
        priority: 8,
        isMatch: (node) =>
          node.nodeName === "PRE" &amp;&amp;
          node.children.length === 1 &amp;&amp;
          node.firstChild.nodeName === "CODE",
        transform: function (node) {
          let pre = node;
          let code = node.querySelector("code");

          let codeType = "html";
          if (pre.classList.contains("language-css")) {
            codeType = "css";
          }
          if (pre.getAttribute("rel") === "CSS") {
            codeType = "css";
          }
          if (pre.classList.contains("language-javascript")) {
            codeType = "javascript";
          }
          if (code.classList.contains("language-javascript")) {
            codeType = "javascript";
          }
          // ... other data wrangling...

          return createBlock("csstricks/code-block", {
            content: code.innerHTML,
            codeType: codeType,
          });
        },
      },
    ],
    to: [
      // ... 
    ],
   
   // ...

}</code></pre>



<p>That <code>isMatch</code> function runs on every node in the HTML it finds, so this is the big opportunity to return <code>true</code> from that in the special situations you need to. Note in the code above that I&#8217;m specifically looking for HTML that looks like <code>&lt;pre ...&gt;&lt;code ...&gt;</code>. When that matches, the transform runs, and I can return a <code>createBlock</code> call that passes in data and content I extract from the node with JavaScript. </p>



<h3>Another example: Pasting a URL</h3>



<p>&#8220;Raw&#8221; transforms don&#8217;t only happen when you &#8220;Convert to Blocks.&#8221; They happen when you paste content into the block editor too. You&#8217;ve probably experienced this before. Say you have copied some table markup from somewhere and paste it into the block editor -— it will probably paste as a table. A YouTube URL might paste into an embed. This kind of thing is why copy/pasting from Word documents and the like tend to work so well with the block editor. </p>



<p>Say you want some special behavior when a certain type of URL is pasted into the editor. This was the situation I was in with our <a href="https://blog.codepen.io/2020/01/22/a-gutenberg-block-for-codepen-embeds-on-wordpress/">custom CodePen Embed block</a>. I wanted it so if you pasted a codepen.io URL, it would use this custom block, instead of the default embed. </p>



<p>This is a &#8220;from&#8221; transform that looks like this:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">{
  type: "raw",
  priority: 8, // higher number to beat out default
  isMatch: (node) =>
    node.nodeName === "P" &amp;&amp;
    node.innerText.startsWith("https://codepen.io/"),

  transform: function (node) {
    return createBlock("cp/codepen-gutenberg-embed-block", {
      penURL: node.innerText,
      penID: getPenID(node.innerText), // helper function
    });
  },
}</code></pre>



<h3>So&#8230;</h3>



<p>Is it messy? A little. But it&#8217;s as powerful as you need it to be. If you have an old site with lots of bespoke HTML and shortcodes and stuff, then getting into block transforms is the only ticket out. </p>



<p>I&#8217;m glad I went to <a href="https://wpblocktalk.wordpress.stream/">WPBlockTalk</a> and caught K. Adam White&#8217;s <a href="http://kadamwhite.github.io/talks/2020/wpblocktalk/assets/player/KeynoteDHTMLPlayer.html">talk on shortcodes</a> because there was <a href="http://kadamwhite.github.io/talks/2020/wpblocktalk/assets/player/KeynoteDHTMLPlayer.html#32">just one slide</a> that clued me into that this was even possible. There is <a href="https://developer.wordpress.org/block-editor/developers/block-api/block-registration/#transforms-optional">a little bit of documentation</a> on it.</p>



<p>One thing I&#8217;d like to figure out is if it&#8217;s possible to run these transforms on <em>all</em> old content in the database. Seems a little scary, but also like it might be a good idea in some situations. Once I get my transformations really solid, I could see doing that so any old content ready-to-go in the block editor when opening it up. I just have no idea how to go about it. </p>



<p>I&#8217;m glad to be somewhat on top of this though, as I friggin love the block editor right now. It&#8217;s a pleasure to write in and build content with it. I like what <a href="https://wptavern.com/the-future-of-wordpress-the-block-editor-is-here-to-stay">Justin Tadlock said</a>:</p>



<blockquote class="wp-block-quote"><p>The block system is not going anywhere. WordPress has moved beyond the point where we should consider the block editor as a separate entity. It is an integral part of WordPress and will eventually touch more and more areas outside of the editing screen.</p></blockquote>



<p>It&#8217;s here to stay. Embracing the block editor and bending it to our will is key.</p>



<div class="wp-block-group footnotes" id="fn:1"><div class="wp-block-group__inner-container">
<ol><li>What are we calling it anyway? &#8220;Gutenberg&#8221; doesn&#8217;t seem right anymore. Feels like that will fade away, even though the development of it still happens in the Gutenberg plugin. I think I&#8217;ll just call it &#8220;the block editor&#8221; unless specifically referring to that plugin.</li></ol>
</div></div>
<p>The post <a rel="nofollow" href="https://css-tricks.com/wordpress-block-transforms/">WordPress Block Transforms</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/wordpress-block-transforms/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">311071</post-id>	</item>
		<item>
		<title>How to Use Block Variations in WordPress</title>
		<link>https://css-tricks.com/how-to-use-block-variations-in-wordpress/</link>
					<comments>https://css-tricks.com/how-to-use-block-variations-in-wordpress/#comments</comments>
		
		<dc:creator><![CDATA[Dmitry Mayorov]]></dc:creator>
		<pubDate>Wed, 06 May 2020 14:43:36 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[gutenberg]]></category>
		<category><![CDATA[WordPress]]></category>
		<category><![CDATA[WordPress blocks]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=307800</guid>

					<description><![CDATA[<p>WordPress 5.4 was released not so long ago and, along with other improvements and bug fixes, it introduced a feature called Block Variations. I had a chance to use it on one of my recent projects and am so pleasantly surprised with how smart this feature is. I actually think it hasn’t received the attention it deserves, which is why I decided to write this article.</p>
<p>What is a Block Variation?</p>
<p><em>Block Variations</em> allow developers to define instances of <em>existing </em>&#8230; <a href="https://css-tricks.com/how-to-use-block-variations-in-wordpress/" class="read-more">Read article <span class="screen-reader-text"> &#8220;How to Use Block Variations in WordPress&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-use-block-variations-in-wordpress/">How to Use Block Variations in WordPress</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>WordPress 5.4 was released not so long ago and, along with other improvements and bug fixes, it introduced a feature called Block Variations. I had a chance to use it on one of my recent projects and am so pleasantly surprised with how smart this feature is. I actually think it hasn’t received the attention it deserves, which is why I decided to write this article.</p>



<span id="more-307800"></span>



<h3>What is a Block Variation?</h3>



<p><em>Block Variations</em> allow developers to define instances of <em>existing blocks</em>. An example that you’ll see below is a quote block. Perhaps your site has three variations of how to display a quote on your site. A Block Variation can be created for each one so that they are all styled differently. This sounds awfully familiar with how Block Styles, but the concept of variations goes a bit further than that, as we’ll see.</p>



<h3>How are Block Variations different from Block Styles?</h3>



<p>Fair question. Block variations appear in the inserter as separate blocks with unique names and (optionally) icons and can have pre-filled custom attributes, and inner blocks.</p>



<p><a href="https://developer.wordpress.org/block-editor/developers/filters/block-filters/#block-style-variations">Block Styles</a> are designed to alter the look of the block. In fact, a Block Style is a fancy way of adding a custom class to a block using the Block options in the post editor.</p>



<p>The difference is clear when you consider how each one is used in the post editor. Let’s say we register a new Block Style called “Fancy Quote.” We do that by extending the core “Quote” block like this example from the <a href="https://developer.wordpress.org/block-editor/developers/filters/block-filters/">Block Editor Handbook</a>:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp.blocks.registerBlockStyle(
  'core/quote',
  {
    name: 'fancy-quote',
    label: 'Fancy Quote'
  },
);</code></pre>



<p>This adds a <code>.is-style-fancy-quote</code> class to the Quote block settings in the post editor.</p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?fit=1024%2C613&amp;ssl=1" alt="Screenshot of the Block options in the WordPress post editor highlighting the options for a quote block. A &quot;Fancy Quote&quot; option is listed under Styles and the custom class name is in an Additional CSS Classes field." class="wp-image-307803" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?w=2560&amp;ssl=1 2560w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?resize=300%2C180&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?resize=1024%2C613&amp;ssl=1 1024w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?resize=768%2C460&amp;ssl=1 768w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?resize=1536%2C919&amp;ssl=1 1536w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?resize=2048%2C1226&amp;ssl=1 2048w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/N4D-NO6m.jpeg?resize=1000%2C598&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>We now have a Fancy Quote option in the Block options under &#8220;Styles&#8221; and the class for it filled in for us.</figcaption></figure>



<p>Even though it sort of sounds like it would do the same thing (which it technically can), a Block Variation can be used to pre-fill custom attributes (including custom classes) and inner blocks. They’re actually registered as separate blocks.</p>



<p>Let’s take a closer look at the API and what block variations can do.</p>



<h3>Creating a Block Variation</h3>



<p>The API for registering Block Variations is very similar that of the Block Style we just looked at:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp.blocks.registerBlockVariation(
  'core/quote',
  {
    name: 'fancy-quote',
    title: 'Fancy Quote',
  },
);</code></pre>



<p>The <code>registerBlockVariation</code> function accepts the name of the block (in our case it is core/quote) and an object (or an array of objects) describing the variation(s).</p>



<p>The code above doesn’t do much by default, but it does add “Fancy Quote” to the list of available blocks.</p>



<figure class="wp-block-image size-large is-resized"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/ORmgmFQA.jpeg?resize=436%2C313&#038;ssl=1" alt="Showing the Fancy Quote variation in the WordPress Block Inserter." class="wp-image-307804" width="436" height="313" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/ORmgmFQA.jpeg?w=872&amp;ssl=1 872w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/ORmgmFQA.jpeg?resize=300%2C215&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/ORmgmFQA.jpeg?resize=768%2C551&amp;ssl=1 768w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /><figcaption>We now have two different&nbsp;“quote”&nbsp;blocks available to drop into the post.</figcaption></figure>



<p>To take full advantage of the variation. we need to provide more details in the object describing it. The list is covered in the <a href="https://make.wordpress.org/core/2020/02/27/introduce-block-variations-api/">Make WordPress post</a>, but I’ll share it here and provide additional comments.</p>



<ul><li><code><strong>name</strong></code> – The unique and machine-readable name of the variation. Following the examples on Github and Make post it’s safe to assume that the best practice is to use kebab-case for naming variations.</li><li><code><strong>title</strong></code> – A human-readable variation title. This is what appears under the icon in the Inserter.</li><li><strong><code>description</code></strong> – A detailed variation description. Appears in the Inserter as well. If empty, the default block description will be used. (Optional)</li><li><strong><code>icon</code></strong> – An icon for the variation. Can be a <a href="https://developer.wordpress.org/resource/dashicons/%23art">Dashicons</a> slug, an SVG or an object. Follows the same declaration pattern as in <a href="https://developer.wordpress.org/block-editor/developers/block-api/block-registration/%23icon-optional"><code>registerBlockType</code></a>. (Optional)</li><li><strong><code>isDefault</code></strong> – Indicates whether the current variation is the default one. Defaults to <code>false</code>. In case of our example, if we set it to <code>true</code>, the <em>Fancy Quote</em> block will be the only Quote block available in the inserter. (Optional)</li><li><strong><code>attributes</code></strong> – Values that override block attributes. These are block-specific. You can set the <code>level</code> for the <em>Heading</em> block or <code>height</code> for <em>Spacer, </em>for example.</li><li><strong><code>innerBlocks</code></strong> – Initial configuration of nested blocks. Only applies to blocks that allow inner blocks in the first place, like Columns, Cover, or Group. We’ll cover this in one of the examples. (Optional)</li><li><strong><code>example</code></strong> – Example provides structured data for the block preview. You can set it to <code>undefined</code> to disable the preview shown for the block type. This is the same as the example field in <code>registerBlockType</code>. (Optional) There&#8217;s <a href="https://developer.wordpress.org/block-editor/developers/block-api/block-registration/%23example-optional">more information</a> available on this parameter.</li><li><strong><code>scope</code></strong> – The list of scopes where the variation is applicable. When not provided, it assumes all available scopes. Available options are <code>block</code> and <code>inserter</code>. We’ll cover this in detail in one of the examples.</li></ul>



<p>Many of you may wonder why we need this extra layer of abstraction. Let me try to answer that with a few use cases (one form my recent project).</p>



<h3>Use case: Buttons with different widths</h3>



<p>Let’s say you have a design system with two types of buttons: <em>Fill</em> and <em>Outline</em>.</p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/3CplmPmh.jpeg?fit=1024%2C256&amp;ssl=1" alt="Two buttons, one with a green fill and one with a green border. Both say Learn More." class="wp-image-307805" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/3CplmPmh.jpeg?w=1400&amp;ssl=1 1400w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/3CplmPmh.jpeg?resize=300%2C75&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/3CplmPmh.jpeg?resize=1024%2C256&amp;ssl=1 1024w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/3CplmPmh.jpeg?resize=768%2C192&amp;ssl=1 768w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/3CplmPmh.jpeg?resize=1000%2C250&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>Fill and Outline button styles in the design system</figcaption></figure>



<p>Lucky you, because these are the default styles for buttons in WordPress. No need to register any new styles or hack the editor. All you have to do is write some CSS for each style and call it a day. Life is good and everybody’s happy.</p>



<p>But then you look in the design spec again and notice that there is a little twist. The buttons come in three widths: <em>Regular</em>, <em>Wide</em>, and <em>Full</em>.</p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?fit=1024%2C317&amp;ssl=1" alt="The same green buttons but with additional variations at two different widths for a totally of six buttons." class="wp-image-307807" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?w=2560&amp;ssl=1 2560w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?resize=300%2C93&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?resize=1024%2C317&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?resize=768%2C238&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?resize=1536%2C476&amp;ssl=1 1536w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?resize=2048%2C634&amp;ssl=1 2048w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ojNU1TyS-scaled.jpeg?resize=1000%2C310&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>Fill and Outline button styles with different width variations</figcaption></figure>



<p>Dammit! You are a little upset because you now have two options:</p>



<ol><li>Write two extra classes for the new button sizes (say, <code>.is-wide</code> and <code>.is-full</code>), then teach the client to use the <em>Advanced</em> panel in the editor to add those classes and write a manual where you explain what each class does. Or…</li><li>Register four(!) new styles that go in the Block options: <em>Fill Wide</em>, <em>Fill Full</em>, <em>Outline Wide</em>, and <em>Outline Full</em>.</li></ol>



<p>Neither of those options are exactly elegant. (BTW, what is <em>Fill Full</em> exactly? Quite an unfortunate mouthful!)</p>



<p>There are two more options that I didn’t include in the list:</p>



<ul><li>Filter the button block and add a custom width control to it</li><li>Build a custom block from scratch.</li></ul>



<p>These obviously feel like heavy lifts for such a simple task.</p>



<p>Enter Block Variations! By adding just two variations, <em>Full</em> and <em>Wide</em>,<em> we can </em>keep things clean and simple:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp.blocks.registerBlockVariation(
  'core/buttons',
  [
    {
      name: 'wide',
      title: 'Wide Buttons',
      attributes: {
        className: 'is-wide'
      },
  },
  {
      name: 'full',
      title: 'Full Buttons',
      attributes: {
        className: 'is-full'
      },
    }
  ]
);</code></pre>



<p>This is the same as adding a custom class to the Buttons block, but in a neat and elegant way that can be dropped directly into a post from the Block Inserter:</p>



<figure class="wp-block-image size-full is-resized"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/2Aa-Hu0g.jpeg?resize=436%2C313&#038;ssl=1" alt="Showing the Wide and Full button variations in the WordPress Block Inserter." class="wp-image-307808" width="436" height="313" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/2Aa-Hu0g.jpeg?w=872&amp;ssl=1 872w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/2Aa-Hu0g.jpeg?resize=300%2C215&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/2Aa-Hu0g.jpeg?resize=768%2C551&amp;ssl=1 768w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /><figcaption>Button variations in the inserter</figcaption></figure>



<p>Life is good and everybody is happy again! <strong>So what did we learn from this example?</strong></p>



<ul><li>It shows that Block Variations are not designed to replace Block Styles. In fact, they can work pretty well together even if the variation just adds a class to a block.</li><li>It demos how to register multiple variations in a single declaration.</li></ul>



<h3>Use case: Repeating column layouts</h3>



<p>Let’s say you are a designer and have a portfolio website with case studies. Each case study has an intro section with the name of the project, client information, and a description of  your role on the project. It might look something like this:</p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?fit=1024%2C256&amp;ssl=1" alt="Showing three columns, one that says Website Design, one that says Clients, and one says Role. Each one represents a column we want on the page." class="wp-image-307833" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?w=2248&amp;ssl=1 2248w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?resize=300%2C75&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?resize=1024%2C256&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?resize=768%2C192&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?resize=1536%2C384&amp;ssl=1 1536w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?resize=2048%2C512&amp;ssl=1 2048w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/ZK0M_RN-.jpeg?resize=1000%2C250&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>The type of work (left), who it was for (center) and your role on it (right)</figcaption></figure>



<p>The problem is that it’s a bit tedious to build this part of the layout every time you create a new portfolio case study — especially because the <em>Client</em> and <em>My Role</em> headings never change. You are only editing the main title and two paragraphs.</p>



<p>With Block Variations, you can create a variation of a core <em>Columns </em>block called <em>Project Intro</em> that will have the columns, and inner blocks already defined. This example is a bit more involved, so we’ll build it out step-by-step.</p>



<p>Let’s start with registering the variation:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp.blocks.registerBlockVariation(
  'core/columns', {
    name: 'project-intro',
    title: 'Project Intro',
    scope: ['inserter'],
    innerBlocks: [
      ['core/column'],
      ['core/column'],
      ['core/column'],
    ],
  }
);</code></pre>



<p>We are taking this example a bit further than the first one, so why not add a custom <a href="https://developer.wordpress.org/resource/dashicons/%23portfolio">portfolio icon</a> from the <a href="https://developer.wordpress.org/resource/dashicons/">Dashicons library</a> that’s baked right into WordPress? We do that with the <code>icon</code> property.</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line="5"><code markup="tt">wp.blocks.registerBlockVariation(
  'core/columns', {
    name: 'project-intro',
    title: 'Project Intro',
    icon: 'portfolio',
    scope: ['inserter'],
    innerBlocks: [
      ['core/column'],
      ['core/column'],
      ['core/column'],
    ],
  }
);</code></pre>



<p>This will make the block available in the block menu with our icon:</p>



<figure class="wp-block-image size-large is-resized"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/kxEOgefw.jpeg?resize=436%2C313&#038;ssl=1" alt="Variation with a custom icon in the Block Inserter." class="wp-image-307836" width="436" height="313" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/kxEOgefw.jpeg?w=872&amp;ssl=1 872w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/kxEOgefw.jpeg?resize=300%2C215&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/kxEOgefw.jpeg?resize=768%2C551&amp;ssl=1 768w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /></figure>



<p>The next important thing happens on where we add inner blocks:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line="7,8,9,10,11"><code markup="tt">wp.blocks.registerBlockVariation(
  'core/columns', {
    name: 'project-intro',
    title: 'Project Intro',
    icon: 'portfolio',
    scope: ['inserter'],
    innerBlocks: [
      ['core/column'],
      ['core/column'],
      ['core/column'],
    ],
  }
);</code></pre>



<p>But this only gives us three empty columns. Let’s add starter content and inner blocks to each of them. We can use the same pattern we use to declare a block template in the <a href="https://github.com/WordPress/gutenberg/tree/master/packages/block-editor/src/components/inner-blocks%23template"><code>InnerBlocks</code> </a>component. We can add an object with block attributes as a second element in the array describing the block, and an array of inner blocks as the third element.</p>



<p>The first column will look like this:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">['core/column', {}, [
  ['core/heading', { level: 2, placeholder: 'Project Title'} ],
]]</code></pre>



<p>…and the complete block variation is like this:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp.blocks.registerBlockVariation (
  'core/columns', {
    name: 'project-intro',
    title: 'Project Intro',
    icon: 'portfolio',
    scope: ['inserter'],
    innerBlocks: [
      ['core/column', {}, [
        ['core/heading', { level: 2, placeholder: 'Project Title' }],
      ]],
      ['core/column', {}, [
        ['core/heading', { level: 3, content: 'Client' }],
        ['core/paragraph', { placeholder: 'Enter client info' }],
      ]],
      ['core/column', {}, [
        ['core/heading', { level: 3, content: 'My Role' }],
        ['core/paragraph', { placeholder: 'Describe your role' }],
      ]],
    ],
  }
);</code></pre>



<p>Cool, now we can insert the whole section with just one click. Okay, it’s a few clicks, but still faster than without using the variations.</p>



<p><strong>So what did we learn from this example?</strong></p>



<ul><li>And demos how to use the inner blocks within the variation</li><li>It shows how to define a custom icon for a variation</li></ul>



<h3>Use case: Four-column layout</h3>



<p>You already know that columns are a default block type, and that there are a handful of options for different types of columns. A four-column layout isn’t one of them, so we can build that. But this introduces a new concept as well: <em>scoping</em> in context of block variations.</p>



<p>Some core blocks, like <em>Columns, </em>already offer variations out of the box. You can choose one of them <em>after</em> you insert the block on the page:</p>



<figure class="wp-block-image size-large is-resized"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/DcKQfY58.jpeg?fit=1024%2C390&amp;ssl=1" alt="Showing the columns block inserted with 5 different layout options to display up to 3 columns at varying widths." class="wp-image-307837" width="512" height="195" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/DcKQfY58.jpeg?w=1160&amp;ssl=1 1160w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/DcKQfY58.jpeg?resize=300%2C114&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/DcKQfY58.jpeg?resize=1024%2C390&amp;ssl=1 1024w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/DcKQfY58.jpeg?resize=768%2C293&amp;ssl=1 768w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/04/DcKQfY58.jpeg?resize=1000%2C381&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>Block-scoped variations</figcaption></figure>



<p>Let’s say you use a four-column layout on your website as often as you use two-column one. That’s unfortunate, because there is no shortcut button to create four-column layout. Creating one is a bit annoying because it takes extra clicks to get to the Columns control after the block is inserted:</p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/t521R_YU.jpeg?fit=1024%2C500&amp;ssl=1" alt="Showing the slider control to change the number of columns in the Block settings." class="wp-image-307838" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/t521R_YU.jpeg?w=1973&amp;ssl=1 1973w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/t521R_YU.jpeg?resize=300%2C146&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/t521R_YU.jpeg?resize=1024%2C500&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/t521R_YU.jpeg?resize=768%2C375&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/t521R_YU.jpeg?resize=1536%2C750&amp;ssl=1 1536w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/04/t521R_YU.jpeg?resize=1000%2C488&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>So, what can you do to improve this workflow? Right, you can add a Block Variation that will create a four-column layout. The only difference this time, compared to previous examples, is that it makes much more sense to include this variation inside the block placeholder, next to all other column layouts.</p>



<p>That is exactly what the scope option is for. If you set it to <code>[block]</code>, the variation will <em>not</em> appear in the Block Inserter but in the variations once the block has been inserted.</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">wp.blocks.registerBlockVariation(
  'core/columns', {
    name: 'four-columns',
    title: 'Four columns; equal split',
    icon: &lt;svg ... />,
    scope: ['block'], // Highlight
    innerBlocks: [
      ['core/column'],
      ['core/column'],
      ['core/column'],
      ['core/column'],
    ],
  }
);</code></pre>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/RY3a2jOO.jpeg?fit=1024%2C390&amp;ssl=1" alt="Four-column layout variation scoped to the block." class="wp-image-307839" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/RY3a2jOO.jpeg?w=1160&amp;ssl=1 1160w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/RY3a2jOO.jpeg?resize=300%2C114&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/RY3a2jOO.jpeg?resize=1024%2C390&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/RY3a2jOO.jpeg?resize=768%2C293&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/RY3a2jOO.jpeg?resize=1000%2C381&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>Hey, now we have a four-column option!</figcaption></figure>



<p>Isn’t that sweet?!</p>



<p class="explanation">I’ve omitted the full SVG code for the icon, but <a href="https://gist.github.com/dmtrmrv/4e6209ff761495db697b509ba045f801">it’s available</a> if you need it.</p>



<p>To sum up <code>scope</code>: If it isn’t declared, the variation will appear in the Block Inserter <em>and </em>inside the block placeholder&nbsp;— specifically for blocks that support block-scoped variations.&nbsp;</p>



<p>If we were to remove the scope parameter from the example above, here’s how the variation would appear in the inserter:</p>



<figure class="wp-block-image size-full is-resized"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/um55cKI2.jpeg?resize=431%2C501&#038;ssl=1" alt="Four-column block variation in the block inserter." class="wp-image-307840" width="431" height="501" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/um55cKI2.jpeg?w=861&amp;ssl=1 861w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/um55cKI2.jpeg?resize=258%2C300&amp;ssl=1 258w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/04/um55cKI2.jpeg?resize=768%2C893&amp;ssl=1 768w" sizes="(min-width: 735px) 864px, 96vw" data-recalc-dims="1" /><figcaption>Keep in mind that the icon sizes for variations within the block and and the block icons size are different. The custom icon for columns was intended for the block scope, that’s why it looks a bit out-of-place in this example.</figcaption></figure>



<p><strong>So what did we learn from this example?</strong></p>



<ul><li>It explains the difference between the block and inserter scope for the variation.</li><li>We learned how to use SVG for variation icon.</li></ul>



<h3><strong>That’</strong>s it!</h3>



<p>As you can see, Block Variations are pretty powerful for building a lot of things, from different variations of buttons to complete page layouts.</p>



<p>I’d like to wrap this up with a quick recap of different APIs for block customizations and when to use them:</p>



<ul><li>Use <strong>Block Styles</strong> if you need to alter the appearance of the block and adding a CSS class is enough for that.</li><li>Use <strong>Block Variations</strong> if you need to specify the default attributes for the block and/or add inner blocks to it.</li><li>If that’s not enough and you need to change the markup of the block, you are probably looking into filtering the block or creating a new one from scratch.</li></ul>



<p>If you’ve had a chance to play with Block Variation, let me know what you think of them in the comments!</p>



<h4>Resources</h4>



<ul><li><a href="https://make.wordpress.org/core/2020/02/27/introduce-block-variations-api/">Make WordPress Post</a></li><li><a href="https://github.com/WordPress/gutenberg/pull/20068">GitHub Pull Request #20068</a></li></ul>
<p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-use-block-variations-in-wordpress/">How to Use Block Variations in WordPress</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/how-to-use-block-variations-in-wordpress/feed/</wfw:commentRss>
			<slash:comments>7</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">307800</post-id>	</item>
		<item>
		<title>Continuous Deployments for WordPress Using GitHub Actions</title>
		<link>https://css-tricks.com/continuous-deployments-for-wordpress-using-github-actions/</link>
					<comments>https://css-tricks.com/continuous-deployments-for-wordpress-using-github-actions/#comments</comments>
		
		<dc:creator><![CDATA[Steffen Bewersdorff]]></dc:creator>
		<pubDate>Mon, 06 Apr 2020 14:26:47 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[continuous integration]]></category>
		<category><![CDATA[deployment]]></category>
		<category><![CDATA[github actions]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=305646</guid>

					<description><![CDATA[<p>Continuous Integration (CI) workflows are considered a best practice these days. As in, you work with your version control system (Git), and as you do, CI is doing work for you like running tests, sending notifications, and deploying code. That last part is called Continuous Deployment (CD). But shipping code to a production server often requires paid services. With <a href="https://github.com/features/actions">GitHub Actions</a>, Continuous Deployment is<em> free for everyone</em>. Let’s explore how to set that up.</p>
<p>DevOps is for everyone&#8230; <a href="https://css-tricks.com/continuous-deployments-for-wordpress-using-github-actions/" class="read-more">Read article <span class="screen-reader-text"> &#8220;Continuous Deployments for WordPress Using GitHub Actions&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/continuous-deployments-for-wordpress-using-github-actions/">Continuous Deployments for WordPress Using GitHub Actions</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>Continuous Integration (CI) workflows are considered a best practice these days. As in, you work with your version control system (Git), and as you do, CI is doing work for you like running tests, sending notifications, and deploying code. That last part is called Continuous Deployment (CD). But shipping code to a production server often requires paid services. With <a href="https://github.com/features/actions">GitHub Actions</a>, Continuous Deployment is<em> free for everyone</em>. Let’s explore how to set that up.</p>



<h3>DevOps is for everyone</h3>



<p>As a front-end developer, continuous deployment workflows used to be exciting, but mysterious to me. I remember numerous times being scared to touch deployment configurations. I defaulted to the easy route instead — usually having someone else set it up and maintain it, or manual copying and pasting things in a worst-case scenario.&nbsp; </p>



<p>As soon as I understood the basics of <a href="https://rsync.samba.org/">rsync</a>, CD finally became tangible to me. With the following GitHub Action workflow, you do not need to be a DevOps specialist; but you’ll still have the tools at hand to set up best practice deployment workflows.</p>



<h3>The basics of a Continuous Deployment workflow</h3>



<p>So what’s the deal, how does this work? It all starts with CI, which means that you commit code to a shared remote repository, like <a href="http://github.com/">GitHub</a>, and every push to it will run automated tasks on a remote server. Those tasks could include test and build processes, like linting, concatenation, minification and image optimization, among others.</p>



<p>CD also delivers code to a production website server. That may happen by copying the verified and built code and placing it on the server via FTP, SSH, or by shipping containers to an infrastructure. While every shared hosting package has FTP access, it’s rather unreliable and slow to send many files to a server. And while shipping application containers is a safe way to release complex applications, the infrastructure and setup can be rather complex as well. Deploying code via SSH though is fast, safe and flexible. Plus, it’s supported by many hosting packages.</p>



<h3>How to deploy with rsync</h3>



<p>An easy and efficient way to ship files to a server via SSH is <a href="https://rsync.samba.org">rsync</a>, a utility tool to sync files between a source and destination folder, drive or computer. It will only synchronize those files which have changed or don’t already exist at the destination. As it became a standard tool on popular Linux distributions, chances are high you don’t even need to install it.</p>



<p>The most basic operation is as easy as calling <code>rsync SRC DEST</code> to sync files from one directory to another one. However, there are a couple of options you want to consider:</p>



<ul><li><code>-c</code> compares file changes by checksum, not modification time</li><li><code>-h</code> outputs numbers in a more human readable format</li><li><code>-a</code> retains file attributes and permissions and recursively copies files and directories</li><li><code>-v</code> shows status output</li><li><code>--delete</code> deletes files from the destination that aren’t found in the source (anymore)</li><li><code>--exclude</code> prevents syncing specified files like the <code>.git</code> directory and <code>node_modules</code></li></ul>



<p>And finally, you want to send the files to a remote server, which makes the full command look like this:</p>



<pre rel="Terminal" class="wp-block-csstricks-code-block language-none" data-line=""><code markup="tt">rsync -chav --delete --exclude /.git/ --exclude /node_modules/ ./ ssh-user@example.com:/mydir</code></pre>



<p>You could run that command from your local computer to deploy to any live server. But how cool would it be if it was running in a controlled environment from a clean state? Right, that’s what you’re here for. Let’s move on with that.</p>



<h3>Create a GitHub Actions workflow</h3>



<p>With <a href="https://github.com/features/actions">GitHub Actions</a> you can <a href="https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow">configure workflows</a> to run on any GitHub event. While there is a <a href="https://github.com/marketplace?type=actions">marketplace for GitHub Actions</a>, we don’t need any of them but will build our own workflow.</p>



<p> To get started, go to the “Actions” tab of your repository and click “Set up a workflow yourself.” This will open the workflow editor with a <code>.yaml</code> template that will be committed to the <code>.github/workflows</code> directory of your repository.</p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/dzCWT0Yg.png?fit=1024%2C912&amp;ssl=1" alt="" class="wp-image-305647" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/dzCWT0Yg.png?w=1600&amp;ssl=1 1600w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/dzCWT0Yg.png?resize=300%2C267&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/dzCWT0Yg.png?resize=1024%2C912&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/dzCWT0Yg.png?resize=768%2C684&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/dzCWT0Yg.png?resize=1536%2C1368&amp;ssl=1 1536w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/dzCWT0Yg.png?resize=1000%2C891&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>When saved, the workflow checks out your repo code and runs some <code>echo</code> commands. <code>name</code> helps follow the status and results later. <code>run</code> contains the shell commands you want to run in each step.</p>



<h3>Define a deployment trigger</h3>



<p>Theoretically, every commit to the master branch should be production-ready. However, reality teaches you that you need to test results on the production server after deployment as well and you need to schedule that. We at <a href="https://bleech.de/">bleech</a> consider it a best practice to only deploy on workdays — except Fridays and only before 4:00 pm — to make sure we have time to roll back or fix issues during business hours if anything goes wrong.</p>



<p>An easy way to get manual-level control is to set up a branch just for triggering deployments. That way, you can specifically merge your master branch into it whenever you are ready. Call that branch production, let everyone on your team know pushes to that branch are only allowed from the master branch and tell them to do it like this:</p>



<pre rel="Terminal" class="wp-block-csstricks-code-block language-none" data-line=""><code markup="tt">git push origin master:production</code></pre>



<p>Here’s how to change your workflow trigger to only run on pushes to that <code>production</code> branch:</p>



<pre rel="YAML" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">name: Deployment
on:
  push:
    branches: [ production ]</code></pre>



<h3>Build and verify the theme</h3>



<p>I’ll assume you’re using our <a href="https://flyntwp.com/">WordPress starter theme Flynt</a>, which comes with dependency management via Composer and npm as well as a preconfigured build process. If you’re using a different theme, the build process is likely to be similar, but might need adjustments. And if you&#8217;re checking in the built assets to your repository, you can skip all steps except the <code>checkout</code> command.</p>



<p>For our example, let’s make sure that node is executed in the required version and that dependencies are installed before building:</p>



<pre rel="YAML" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    
    - uses: actions/setup-node@v1.1.0
      with:
        version: 12.x

    - name: Install dependencies
      run: |
        composer install -o
        npm install

    - name: Build
      run: npm run build</code></pre>



<p>The <a href="https://flyntwp.com/">Flynt</a> build task finally requires, lints, compiles, and transpiles Sass and JavaScript files, then adds revisioning to assets to prevent browser cache issues. If anything in the build step fails, the workflow will stop executing and thus prevents you from deploying a broken release.</p>



<h3>Configure server access and destination</h3>



<p>For the <code>rsync</code> command to run successfully, GitHub needs access to SSH into your server. This can be accomplished by:</p>



<ol><li><a href="https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent%23generating-a-new-ssh-key">Generating a new SSH key</a> (without a passphrase)</li><li>Adding the public key to your <code>~/.ssh/authorized_keys</code> on the production server</li><li>Adding the private key as a secret with the name <code>DEPLOY_KEY</code> to the repository</li></ol>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/DSJHOycM.png?fit=1024%2C800&amp;ssl=1" alt="" class="wp-image-305648" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/DSJHOycM.png?w=1600&amp;ssl=1 1600w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/DSJHOycM.png?resize=300%2C234&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/DSJHOycM.png?resize=1024%2C800&amp;ssl=1 1024w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/DSJHOycM.png?resize=768%2C600&amp;ssl=1 768w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/DSJHOycM.png?resize=1536%2C1200&amp;ssl=1 1536w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/DSJHOycM.png?resize=1000%2C781&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>The sync workflow step needs to save the key to a local file, adjust file permissions and pass the file to the <code>rsync</code> command. The destination has to point to your WordPress theme directory on the production server. It’s convenient to define it as a variable so you know what to change when reusing the workflow for future projects.</p>



<pre rel="YAML" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">- name: Sync
  env:
    dest: 'ssh-user@example.com:/mydir/wp-content/themes/mytheme’
  run: |
    echo "${{secrets.DEPLOY_KEY}}" > deploy_key
    chmod 600 ./deploy_key
    rsync -chav --delete \
      -e 'ssh -i ./deploy_key -o StrictHostKeyChecking=no' \
      --exclude /deploy_key \
      --exclude /.git/ \
      --exclude /.github/ \
      --exclude /node_modules/ \
      ./ ${{env.dest}}</code></pre>



<p>Depending on your project structure, you might want to deploy plugins and other theme related files as well. To accomplish that, change the source and destination to the desired parent directory, make sure to check if the excluded files need an update, and check if any paths in the build process should be adjusted.&nbsp;</p>



<h3>Put the pieces together</h3>



<p>We’ve covered all necessary steps of the CD process. Now we need to run them in a sequence which should:</p>



<ol><li>Trigger on each push to the <code>production</code> branch</li><li>Install dependencies</li><li>Build and verify the code</li><li>Send the result to a server via rsync</li></ol>



<p><a href="https://github.com/bleech/github-actions-wordpress-theme-deployment/blob/master/.github/workflows/deployment.yml">The complete GitHub workflow</a> will look like this:</p>



<pre rel="YAML" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">name: Deployment

on:
  push:
    branches: [ production ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - uses: actions/setup-node@v1.1.0
      with:
        version: 12.x

    - name: Install dependencies
      run: |
        composer install -o
        npm install

    - name: Build
      run: npm run build
    
    - name: Sync
      env:
        dest: 'ssh-user@example.com:/mydir/wp-content/themes/mytheme’
      run: |
        echo "${{secrets.DEPLOY_KEY}}" > deploy_key
        chmod 600 ./deploy_key
        rsync -chav --delete \
          -e 'ssh -i ./deploy_key -o StrictHostKeyChecking=no' \
          --exclude /deploy_key \
          --exclude /.git/ \
          --exclude /.github/ \
          --exclude /node_modules/ \
          ./ ${{env.dest}}</code></pre>



<p>To test the workflow, commit the changes, pull them into your local repository and trigger the deployment by pushing your <code>master</code> branch to the <code>production</code> branch:</p>



<pre rel="Terminal" class="wp-block-csstricks-code-block language-none" data-line=""><code markup="tt">git push origin master:production</code></pre>



<p>You can follow the status of the execution by going to the “Actions” tab in GitHub, then selecting the recent execution and clicking on the “deploy“ job. The green checkmarks indicate that everything went smoothly. If there are any issues, check the logs of the failed step to fix them.</p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/2cv9TRDU.png?fit=1024%2C768&amp;ssl=1" alt="" class="wp-image-305649" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/2cv9TRDU.png?w=1600&amp;ssl=1 1600w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/2cv9TRDU.png?resize=300%2C225&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/2cv9TRDU.png?resize=1024%2C768&amp;ssl=1 1024w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/2cv9TRDU.png?resize=768%2C576&amp;ssl=1 768w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/2cv9TRDU.png?resize=1536%2C1152&amp;ssl=1 1536w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/2cv9TRDU.png?resize=1000%2C750&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p><a href="https://github.com/bleech/github-actions-wordpress-theme-deployment/runs/498000214">Check the full report on GitHub</a></p>



<hr class="wp-block-separator"/>



<p>Congratulations! You’ve successfully deployed your WordPress theme to a server. The workflow file can easily be reused for future projects, making continuous deployment setups a breeze.</p>



<p>To further refine your deployment process, the following topics are worth considering:</p>



<ul><li><a href="https://help.github.com/en/actions/configuring-and-managing-workflows/caching-dependencies-to-speed-up-workflows">Caching dependencies</a> to speed up the GitHub workflow</li><li>Activating the WordPress maintenance mode while syncing files</li><li>Clearing the website cache of a plugin (like <a href="https://de.wordpress.org/plugins/cache-enabler/">Cache Enabler</a>) after the deployment</li></ul>
<p>The post <a rel="nofollow" href="https://css-tricks.com/continuous-deployments-for-wordpress-using-github-actions/">Continuous Deployments for WordPress Using GitHub Actions</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/continuous-deployments-for-wordpress-using-github-actions/feed/</wfw:commentRss>
			<slash:comments>15</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">305646</post-id>	</item>
		<item>
		<title>WooCommerce 4.0 &#038; WooCommerce Payments Beta</title>
		<link>https://css-tricks.com/woocommerce-4-0-woocommerce-payments-beta/</link>
					<comments>https://css-tricks.com/woocommerce-4-0-woocommerce-payments-beta/#comments</comments>
		
		<dc:creator><![CDATA[Chris Coyier]]></dc:creator>
		<pubDate>Tue, 17 Mar 2020 13:53:37 +0000</pubDate>
				<category><![CDATA[Sponsored]]></category>
		<category><![CDATA[woocommerce]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=305055</guid>

					<description><![CDATA[<p>Y&#8217;all know <a href="https://woocommerce.com/?aff=8638">WooCommerce</a>: it&#8217;s a plugin for WordPress that adds robust eCommerce functionality to your site. Notably, like WordPress itself, it&#8217;s open-source and free. You only pay for things if you need things like special plugins that extend functionality. </p>
<p>This is a huge month for WooCommerce! Two major releases:</p>
<ul>
<li><a href="https://woocommerce.wordpress.com/2020/03/10/woocommerce-4-0-is-here/">Version 4.0 is here</a></li>
<li><a href="https://woocommerce.com/products/woocommerce-payments/">WooCommerce Payments (Beta) is here</a></li>
</ul>
<p>WooCommerce is a major upgrade, to the point that there are things that aren&#8217;t compatible just yet. You should do all &#8230; <a href="https://css-tricks.com/woocommerce-4-0-woocommerce-payments-beta/" class="read-more">Read article <span class="screen-reader-text"> &#8220;WooCommerce 4.0 &#038; WooCommerce Payments Beta&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/woocommerce-4-0-woocommerce-payments-beta/">WooCommerce 4.0 &#038; WooCommerce Payments Beta</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>Y&#8217;all know <a href="https://woocommerce.com/?aff=8638">WooCommerce</a>: it&#8217;s a plugin for WordPress that adds robust eCommerce functionality to your site. Notably, like WordPress itself, it&#8217;s open-source and free. You only pay for things if you need things like special plugins that extend functionality. </p>



<p>This is a huge month for WooCommerce! Two major releases:</p>



<ul><li><a href="https://woocommerce.wordpress.com/2020/03/10/woocommerce-4-0-is-here/">Version 4.0 is here</a></li><li><a href="https://woocommerce.com/products/woocommerce-payments/">WooCommerce Payments (Beta) is here</a></li></ul>



<span id="more-305055"></span>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/wc-4-1.png?fit=1024%2C570&amp;ssl=1" alt="" class="wp-image-305148" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/wc-4-1.png?w=1424&amp;ssl=1 1424w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/wc-4-1.png?resize=300%2C167&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/wc-4-1.png?resize=1024%2C570&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/wc-4-1.png?resize=768%2C428&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/wc-4-1.png?resize=1000%2C557&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>WooCommerce is a major upgrade, to the point that there are things that aren&#8217;t compatible just yet. You should do all <a href="https://docs.woocommerce.com/document/how-to-update-woocommerce/">the normal best practices</a> when upgrading, like making backups and testing on staging first. Once you&#8217;ve upgraded, you get:</p>



<ul><li><strong>New admin:</strong> You don&#8217;t need the separate admin plugin anymore, it&#8217;s baked right in! So you get very nice detailed reporting of just about any aspect of your sales performance. Stuff like comparing year-of-year sales and full customization of reports. </li><li><strong>New onboarding:</strong> If you already use WooCommerce, you&#8217;re already all set, but for new users, you&#8217;ll be walked through setup in a much more clear way. Like a multi-step wizard that asks you questions about your business and gets things configured correctly.</li><li><strong>Behind the scenes:</strong> A crucial bit to WooCommerce is the Action Scheduler and a change in 4.0 is moving that work to the database level for much better performance. For example, if you sell subscriptions, this is the thing that runs that updates all your users subscriptions and keeps them in the correct state and updates all the admin data.</li></ul>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?fit=1024%2C601&amp;ssl=1" alt="" class="wp-image-305149" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?w=2560&amp;ssl=1 2560w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?resize=300%2C176&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?resize=1024%2C601&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?resize=768%2C451&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?resize=1536%2C902&amp;ssl=1 1536w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?resize=2048%2C1202&amp;ssl=1 2048w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/analytics-scaled.jpg?resize=1000%2C587&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>If you&#8217;d like to read more about the 4.0 release&#8230;</p>



<ul><li><a href="https://woocommerce.com/woocommerce-4-0/">The Official Announcement</a></li><li>Bob Dunn <a href="https://bobwp.com/woocommerce-4-0-release/">wrote about the release</a></li><li>Justin Tadlock <a href="https://wptavern.com/woocommerce-4-0-lands-with-new-admin-interface-and-updated-onboarding-experience">covered the release</a></li></ul>



<h3>WooCommerce Payments (Beta)</h3>



<p><a href="https://woocommerce.com/products/woocommerce-payments/">This is a brand new (free) plugin</a> from WooCommerce. Funny name, right? Of course, WooCommerce could already take payments. If you wanted to take credit cards, your best bet was the <a href="https://woocommerce.com/products/stripe/">Stripe plugin</a>, as it worked great and also opened doors for taking Apple Pay, Google Pay, and others.</p>



<p>With WooCommerce Payments <em>the entire payments experience is moved right into your WooCommerce dashboard</em>. You go through a little onboarding experience as you activate it and then you&#8217;ve got a whole new area of your dashboard dedicated to payments. </p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/VerifyDetails.png?fit=1024%2C629&amp;ssl=1" alt="" class="wp-image-305150" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/VerifyDetails.png?w=1536&amp;ssl=1 1536w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/VerifyDetails.png?resize=300%2C184&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/VerifyDetails.png?resize=1024%2C629&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/VerifyDetails.png?resize=768%2C472&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/VerifyDetails.png?resize=1000%2C615&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>This video does a good job of showing it off:</p>



<figure class="wp-block-video"><video controls src="https://res.cloudinary.com/css-tricks/video/upload/v1584194840/LandingPageVideo_m9rcuo.mp4"></video></figure>



<p> You can:</p>



<ul><li>See all the payments</li><li>See deposits to your bank</li><li>Process refunds</li><li>Deal with your disputes</li></ul>



<p>And all that type of stuff directly on your dashboard, rather than having to hop over to some other payment dashboard elsewhere to do things. It&#8217;s a totally custom-designed experience just for WooCommerce. </p>



<p class="explanation">Want in? <strong>If you&#8217;re in the U.S</strong>., <a href="https://woocommerce.com/products/woocommerce-payments/?utm_source=chriscoyier&amp;utm_medium=referral&amp;utm_campaign=wcpaybeta">here&#8217;s a special link</a> to skip the beta invite process and download the plugin. It&#8217;s not available quite yet for the rest of the world, but you can still <a href="https://woocommerce.com/payments/?utm_source=chriscoyier&amp;utm_medium=referral&amp;utm_campaign=wcpaybeta">sign up for the beta</a> to help signal interest in your region. </p>



<h3>What do <em>we</em> use it all for?</h3>



<p>Here at CSS-Tricks, in the past, we&#8217;ve used WooCommerce for selling merchandise like t-shirts and the like. We&#8217;re not doing that at the moment, but maybe we will someday again! WooCommerce is still on the site and upgrading to 4.0 was painless for me. </p>



<p><strong>Lately, I&#8217;ve been more interested in what it might be like to have memberships again.</strong> And actually, to be accurate, <em>subscriptions </em>to<em> memberships</em>, as those are different things and it took me a minute to wrap my brain around that. They are both separate plugins but work together:</p>



<ul><li><a href="https://woocommerce.com/products/woocommerce-memberships/">WooCommerce Memberships</a> deals with selling a &#8220;product&#8221; that can unlock certain areas of a site. </li><li><a href="https://woocommerce.com/products/woocommerce-subscriptions/">WooCommerce Subscriptions</a> gives you the ability to create recurring charges. </li></ul>



<p>So if you wanted a membership that you charged on a monthly or annual basis for (rather than a one-off cost membership), you use <em>both</em> plugins. Memberships deal with locking down the content and they expire at the end of a term. A subscription can keep a membership going by extending the membership upon recurring payments. </p>



<p>I&#8217;m still learning how all this can work, but here&#8217;s a whirlwind tour. </p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?fit=1024%2C687&amp;ssl=1" alt="" class="wp-image-305170" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?w=2620&amp;ssl=1 2620w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?resize=300%2C201&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?resize=1024%2C687&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?resize=768%2C515&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?resize=1536%2C1031&amp;ssl=1 1536w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?resize=2048%2C1374&amp;ssl=1 2048w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/memberships.png?resize=1000%2C671&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>With the Memberships plugin in place, I can create a Membership plan for the site. Notice that&#8217;s it&#8217;s &#8220;subscription tied&#8221; to a length of time, thanks to the Subscription plugin.</figcaption></figure>



<p>Now say I publish something that I&#8217;d like to lock down to members. In the &#8220;Advanced Panels&#8221; area after the editor, there will be a content restriction area that comes from the Membership plugin. </p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?fit=1024%2C604&amp;ssl=1" alt="" class="wp-image-305171" srcset="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?w=2822&amp;ssl=1 2822w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?resize=300%2C177&amp;ssl=1 300w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?resize=1024%2C604&amp;ssl=1 1024w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?resize=768%2C453&amp;ssl=1 768w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?resize=1536%2C906&amp;ssl=1 1536w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?resize=2048%2C1208&amp;ssl=1 2048w, https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/03/Screen-Shot-2020-03-15-at-6.41.38-AM.png?resize=1000%2C590&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /><figcaption>I can choose to lock down content at the fine-grained post/page level if I like. I can also do whole hierarchies of pages or categories or custom post types or the like.</figcaption></figure>



<p>Now if I was to view that page as someone who wasn&#8217;t a member (and by the way, the <a href="https://wordpress.org/plugins/user-switching/">User Switching plugin</a> is nicely integrated so you can preview the site as people of different plans) I would see only an expert of the post and the rest of it hidden with a content-locked message.</p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/locked-content.png?fit=1024%2C820&amp;ssl=1" alt="" class="wp-image-305173" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/locked-content.png?w=1770&amp;ssl=1 1770w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/locked-content.png?resize=300%2C240&amp;ssl=1 300w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/locked-content.png?resize=1024%2C820&amp;ssl=1 1024w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/locked-content.png?resize=768%2C615&amp;ssl=1 768w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/locked-content.png?resize=1536%2C1231&amp;ssl=1 1536w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/03/locked-content.png?resize=1000%2C801&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>From there, of course, the user could proceed with purchasing a membership to unlock the content. </p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?fit=1024%2C757&amp;ssl=1" alt="" class="wp-image-305174" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?w=2772&amp;ssl=1 2772w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?resize=300%2C222&amp;ssl=1 300w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?resize=1024%2C757&amp;ssl=1 1024w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?resize=768%2C568&amp;ssl=1 768w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?resize=1536%2C1136&amp;ssl=1 1536w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?resize=2048%2C1515&amp;ssl=1 2048w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/checkout.png?resize=1000%2C740&amp;ssl=1 1000w" sizes="(min-width: 735px) 864px, 96vw" /></figure>



<p>I really like how easy this all is to set up and how well integrated into WordPress it is. Of course it is, that&#8217;s why WooCommerce is the most popular eCommerce platform out there. </p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/woocommerce-4-0-woocommerce-payments-beta/">WooCommerce 4.0 &#038; WooCommerce Payments Beta</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/woocommerce-4-0-woocommerce-payments-beta/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		<enclosure url="https://res.cloudinary.com/css-tricks/video/upload/v1584194840/LandingPageVideo_m9rcuo.mp4" length="14471314" type="video/mp4" />

		<post-id xmlns="com-wordpress:feed-additions:1">305055</post-id>	</item>
		<item>
		<title>How to Customize the WooCommerce Cart Page on a WordPress Site</title>
		<link>https://css-tricks.com/how-to-customize-the-woocommerce-cart-page-on-a-wordpress-site/</link>
					<comments>https://css-tricks.com/how-to-customize-the-woocommerce-cart-page-on-a-wordpress-site/#comments</comments>
		
		<dc:creator><![CDATA[Andres Sanchez]]></dc:creator>
		<pubDate>Fri, 28 Feb 2020 15:26:01 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[ecommerce]]></category>
		<category><![CDATA[woocommerce]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=304012</guid>

					<description><![CDATA[<p>A standard e-commerce site has a few common pages. There are product pages, shop pages that list products, and let’s not forget pages for the user account, checkout flow and cart.</p>
<p><a href="https://woocommerce.com">WooCommerce</a> makes it a trivial task to set these up on a WordPress site because it provides templates for them and create the pages for you right out of the box. This is what makes it easy to get your store up and running in a few minutes just &#8230; <a href="https://css-tricks.com/how-to-customize-the-woocommerce-cart-page-on-a-wordpress-site/" class="read-more">Read article <span class="screen-reader-text"> &#8220;How to Customize the WooCommerce Cart Page on a WordPress Site&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-customize-the-woocommerce-cart-page-on-a-wordpress-site/">How to Customize the WooCommerce Cart Page on a WordPress Site</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>A standard e-commerce site has a few common pages. There are product pages, shop pages that list products, and let’s not forget pages for the user account, checkout flow and cart.</p>



<p><a href="https://woocommerce.com">WooCommerce</a> makes it a trivial task to set these up on a WordPress site because it provides templates for them and create the pages for you right out of the box. This is what makes it easy to get your store up and running in a few minutes just by setting up some products and your payment processing details. WooCommerce is very helpful that way.</p>



<p>But this isn’t a post extolling the virtues of WooCommerce. Instead, let’s look at how we can customize parts of it. Specifically, I want to look at the cart. WooCommerce is super extensible in the sense that it provides a ton of filters and actions that can be hooked into, plus a way to <a href="https://docs.woocommerce.com/document/template-structure/">override the templates</a> in a WordPress theme. The problem is, those take at least some intermediate-level dev chops which may not be feasible for some folks. And, at least in my experience, the cart page tends to be the most difficult to grok and customize.</p>



<span id="more-304012"></span>



<p>Let’s look at how to change the WooCommerce cart page by implementing a different layout. This is how a standard default cart page looks:</p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/02/wc-default-cart.png?ssl=1" alt="" class="wp-image-304017" data-recalc-dims="1"/></figure>



<p>We’ll go for something like this instead:</p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/02/wc-cart-finished.png?ssl=1" alt="" class="wp-image-304013" data-recalc-dims="1"/></figure>



<p>Here’s what’s different:</p>



<ul><li>We’re adopting a two-column layout instead of the single full-width layout of the default template. This allows us to bring the “Cart totals” element up top so it is more visible on larger screens.</li><li>We’re adding some reassurance for customers by including benefits below the list of products in the cart. This reminds the customer the value they’re getting with their purchase, like free shipping, easy exchanges, customer support and security.</li><li>We’re including a list of frequently asked questions beneath the list of products in an accordion format. This helps the customer get answers to questions about their purchase without have to leave and contact support.</li></ul>



<p class="explanation">This tutorial assumes that you have access to your theme files. If you don’t feel comfortable logging in to your hosting server and going to the file manager, I would suggest you install the plugin <a href="https://wordpress.org/plugins/wp-file-manager/">WP File Manager</a>. With just the free version, you can accomplish everything explained here.</p>



<h3>First, let’s roll our own template</h3>



<p>One of the many benefits of WooCommerce is that it gives us pre-designed and coded templates to work with. The problem is that those template files are located in the plugin folder. And if the plugin updates in the future (which it most certainly will), any changes we make to the template will get lost. Since directly editing plugin files is a big ol’ no-no in WordPress, WooCommerce lets us modify the files by <a href="https://docs.woocommerce.com/document/template-structure/">making copies of them that go in the theme folder</a>.</p>



<p class="explanation">It’s a good idea to <a href="https://developer.wordpress.org/themes/advanced-topics/child-themes/">use a child theme</a> when making these sorts of changes, especially if you are using a third-party theme. That way, any changes made to the theme folder aren’t lost when theme updates are released.</p>



<p>To do this, we first have to locate the template we want to customize. That means going into the site’s root directory (or wherever you keep your site files if working locally, which is a great idea) and open up the <code>/wp-content</code> where WordPress is installed. There are several folders in there, one of which is /plugins. Open that one up and then hop over to the <code>/woocommerce</code> folder. That’s the main directory for all-things-WooCommerce. We want the <code>cart.php</code> file, which is located at:</p>



<pre rel="" class="wp-block-csstricks-code-block language-none" data-line=""><code markup="tt">/wp-content/plugins/woocommerce/templates/cart/cart.php</code></pre>



<p>Let’s open up that file in a code editor. One of the first things you’ll notice is a series of comments on top of the file:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="4"><code markup="tt">/**
 * Cart Page
 *
 * This template can be overridden by copying it to yourtheme/woocommerce/cart/cart.php. // highlight
 *
 * HOWEVER, on occasion WooCommerce will need to update template files and you
 * (the theme developer) will need to copy the new files to your theme to
 * maintain compatibility. We try to do this as little as possible, but it does
 * happen. When this occurs the version of the template file will be bumped and
 * the readme will list any important changes.
 *
 * @see     https://docs.woocommerce.com/document/template-structure/
 * @package WooCommerce/Templates
 * @version 3.8.0
 */</code></pre>



<p>The highlighted line is exactly what we’re looking for — instructions on how to override the file! How kind of the WooCommerce team to note that up front for us.</p>



<p>Let’s make a copy of that file and create the file path they suggest in the theme:</p>



<pre rel="" class="wp-block-csstricks-code-block language-none" data-line=""><code markup="tt">/wp-content/themes/[your-theme]/woocommerce/cart/cart.php</code></pre>



<p>Drop the copied file there and we’re good to start working on it.</p>



<h3>Next, let’s add our own markup</h3>



<p>The first two things we can tackle are the benefits and frequently asked questions we identified earlier. We want to add those to the template.</p>



<p>Where does our markup go? Well, to make the layout look the way we laid it out at the beginning of this post, we can start below the cart’s closing table <code>&lt;/table&gt;</code> , like this:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;/table>

&lt;!-- Custom code here -->

&lt;?php do_action( 'woocommerce_after_cart_table' ); ?></code></pre>



<p>We won’t cover the specific HTML that makes these elements. The important thing is knowing <em>where</em> that markup goes.</p>



<p>Once we’ve done that, we should end up with something like this:</p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/02/wc-new-elements.png?ssl=1" alt="" class="wp-image-304016" data-recalc-dims="1"/></figure>



<p>Now we have all the elements we want on the page. All that’s left is to style things up so we have the two-column layout.</p>



<h3>Alright, now we can override the CSS</h3>



<p>We could’ve add more markup to the template to create two separate columns. But the existing markup is already organized nicely in a way that we can accomplish what we want with CSS… <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">thanks to flexbox</a>!</p>



<p>The first step involves making the <code>.woocommerce</code> &nbsp;element a flex container. It’s the element that contains all our other elements, so it makes for a good parent. To make sure we’re only modifying it in the cart and not other pages (because other templates do indeed use this class), we should scope the styles to the cart page class, which WooCommerce also readily makes available.</p>



<pre rel="CSS" class="wp-block-csstricks-code-block language-css" data-line=""><code markup="tt">.woocommerce-cart .woocommerce {
  display: flex;
}</code></pre>



<p class="explanation">These styles can go directly in your theme’s style.css file. <a href="https://docs.woocommerce.com/document/css-structure/">That’s what WooCommerce suggests.</a> Remember, though, that there are <a href="https://css-tricks.com/methods-overriding-styles-wordpress/">plenty of ways to customize styles in WordPress</a>, some safer and more maintainable than others.</p>



<p>We have two child elements in the <code>.woocommerce</code> element, perfect for our two-column layout: <code>.woocommerce-cart-form</code> and <code>.cart-collaterals</code>. This is the CSS we need to split things up winds up looking something like this:</p>



<pre rel="CSS" class="wp-block-csstricks-code-block language-css" data-line=""><code markup="tt">
/* The table containing the list of products and our custom elements */
.woocommerce-cart .woocommerce-cart-form {
  flex: 1 0 70%; /* 100% at small screens; 70% on larger screens */
  margin-right: 30px;
}

/* The element that contains the cart totals */
.woocommerce-cart .cart-collaterals {
  flex: 1 0 30%; /* 100% at small screens; 30% on larger screens */
  margin-left: 30px;
}

/* Some minor tweak to make sure the cart totals fill the space */
.woocommerce-cart .cart-collaterals .cart_totals {
  width: 100%;
  padding: 0 20px 70px;
}</code></pre>



<p>That gives us a pretty clean layout:</p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/02/wc-cart-new-layout.png?ssl=1" alt="" class="wp-image-304015" data-recalc-dims="1"/></figure>



<p>It looks more like Amazon’s cart page and other popular e-commerce stores, which is not at all a bad thing.</p>



<h3>Best practice: Make the most important elements stand out</h3>



<p>One of the problems I have with WooCommerce’s default designs is that all the buttons are designed the same way. They’re all the same size and same background color.</p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/02/woocommerce-default-cart.png?ssl=1" alt="" class="wp-image-304014" data-recalc-dims="1"/><figcaption>Look at all that blue!</figcaption></figure>



<p>There is no visual hierarchy on the action users should take and, as such, it’s tough to distinguish, say, how to update the cart from proceeding to checkout. The next thing we ought to do is make that distinction clearer by changing the background colors of the buttons. For that, we write the following CSS:</p>



<pre rel="CSS" class="wp-block-csstricks-code-block language-css" data-line=""><code markup="tt">/* The "Apply Coupon" button */
.button[name="apply_coupon"] {
  background-color: transparent;
  color: #13aff0;
}
/* Fill the "Apply Coupon" button background color and underline it on hover */
.button[name="apply_coupon"]:hover {
  background-color: transparent;
  text-decoration: underline;
}
 
/* The "Update Cart" button */
.button[name="update_cart"] {
  background-color: #e2e2e2;
  color: #13aff0;
}
/* Brighten up the button on hover */
.button[name="update_cart"]:hover {
  filter: brightness(115%);
}</code></pre>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/02/wc-cart-finished.png?ssl=1" alt="" class="wp-image-304013" data-recalc-dims="1"/></figure>



<p>This way, we create the following hierarchy:&nbsp;</p>



<ol><li>The “Proceed to checkout” is pretty much left as-is, with the default blue background color to make it stand out as it is the most important action in the cart.</li><li>The “Update cart” button gets a grey background that blends in with the white background of the page. This de-prioritizes it.</li><li>The “Apply coupon” is less a button and more of a text link, making it the least important action of the bunch.</li></ol>



<p>The full CSS that you have to add to make this design is here:</p>



<pre rel="CSS" class="wp-block-csstricks-code-block language-css" data-line=""><code markup="tt">@media(min-width: 1100px) {
  .woocommerce-cart .woocommerce {
    display: flex;
  }
  .woocommerce-cart .woocommerce-cart-form {
    flex: 1 0 70%;
    margin-right: 30px;
  }    
  .woocommerce-cart .cart-collaterals {
    flex: 1 0 30%;
    margin-left: 30px;
  }
}
 
.button[name="apply_coupon"] {
  background-color: transparent;
  color: #13aff0;
}
 
.button[name="apply_coupon"]:hover {
  text-decoration: underline;
  background-color: transparent;
  color: #13aff0;
}
 
.button[name="update_cart"] {
  background-color: #e2e2e2;
  color: #13aff0;
}
 
.button[name="update_cart"]:hover {
  background-color: #e2e2e2;
  color: #13aff0;
  filter: brightness(115%);
}</code></pre>



<h3>That’s a wrap!</h3>



<p>Not too bad, right? It’s nice that WooCommerce makes itself so extensible, but without some general guidance, it might be tough to know just how much leeway you have to customize things. In this case, we saw how we can override the plugin’s cart template in a theme directory to future-proof it from future updates, and how we can override styles in our own stylesheet. We could have also looked at using <a href="https://docs.woocommerce.com/document/introduction-to-hooks-actions-and-filters/">WooCommerce hooks</a>, the <a href="https://docs.woocommerce.com/document/wc_api-the-woocommerce-api-callback/">WooCommerce API</a>, or even using <a href="https://docs.woocommerce.com/document/conditional-tags/">WooCommerce conditions</a> to streamline customizations, but perhaps those are good for another post at another time.</p>



<p>In the meantime, have fun customizing the e-commerce experience on your WordPress site and feel free to spend a little time in the <a href="https://docs.woocommerce.com/documentation/plugins/woocommerce/woocommerce-codex/">WooCommerce docs</a> — there are lots of goodies in there, including <a href="https://docs.woocommerce.com/documentation/plugins/woocommerce/woocommerce-codex/snippets/">pre-made snippets</a> for all sorts of things.<br></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-customize-the-woocommerce-cart-page-on-a-wordpress-site/">How to Customize the WooCommerce Cart Page on a WordPress Site</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/how-to-customize-the-woocommerce-cart-page-on-a-wordpress-site/feed/</wfw:commentRss>
			<slash:comments>10</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">304012</post-id>	</item>
		<item>
		<title>Where to Learn WordPress Theme Development</title>
		<link>https://css-tricks.com/where-to-learn-wordpress-theme-development/</link>
					<comments>https://css-tricks.com/where-to-learn-wordpress-theme-development/#comments</comments>
		
		<dc:creator><![CDATA[Chris Coyier]]></dc:creator>
		<pubDate>Fri, 28 Feb 2020 15:25:46 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[learning]]></category>
		<category><![CDATA[themes]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=302979</guid>

					<description><![CDATA[<p>Over a decade ago, I did a little three-part video series on <a href="https://css-tricks.com/video-screencasts/25-designing-for-wordpress-part-one/">Designing for WordPress</a>. Then I did other series with the same spirit, like videocasting the <a href="https://css-tricks.com/lodge/v10/">whole v10 redesign</a>, <a href="https://css-tricks.com/lodge/artists-website/">a friend&#8217;s website</a>, and even <a href="https://digwp.com/">writing a book</a>. Those are getting a little long in the tooth though. You might still learn from watching them if you&#8217;re getting into WordPress theme development, but there will be moments that feel very aged (old UI&#8217;s and old versions &#8230; <a href="https://css-tricks.com/where-to-learn-wordpress-theme-development/" class="read-more">Read article <span class="screen-reader-text"> &#8220;Where to Learn WordPress Theme Development&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/where-to-learn-wordpress-theme-development/">Where to Learn WordPress Theme Development</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>Over a decade ago, I did a little three-part video series on <a href="https://css-tricks.com/video-screencasts/25-designing-for-wordpress-part-one/">Designing for WordPress</a>. Then I did other series with the same spirit, like videocasting the <a href="https://css-tricks.com/lodge/v10/">whole v10 redesign</a>, <a href="https://css-tricks.com/lodge/artists-website/">a friend&#8217;s website</a>, and even <a href="https://digwp.com/">writing a book</a>. Those are getting a little long in the tooth though. You might still learn from watching them if you&#8217;re getting into WordPress theme development, but there will be moments that feel very aged (old UI&#8217;s and old versions of software). All the code still <em>works</em> though, because WordPress is great at backward compatibility. I still hear from people who found those videos very helpful for them.</p>



<p>But since time has pressed on, and I was recently asked what resources I would suggest <em>now</em>, I figured I&#8217;d have a look around and see what looks good to me.</p>



<span id="more-302979"></span>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/02/learnwordpress.png?ssl=1" alt="" class="wp-image-303338" data-recalc-dims="1"/><figcaption>Do you like how I plopped the WordPress logo over some stock art I bought that features both a computer and a chalkboard, by which to evoke a feeling of &#8220;learning&#8221;? So good. I know.</figcaption></figure>



<h3>Who are we talking to?</h3>



<p>There&#8217;s a <em>spectrum</em> of WordPress developers, from people who don&#8217;t know any code at all or barely touch it, to hardcore programming nerds building custom everything. </p>



<ol><li>Pick out a theme that looks good, use it.</li><li>&#x1f937;&#x200d;&#x2642;&#xfe0f;</li><li>&#x1f937;&#x200d;&#x2642;&#xfe0f;</li><li>&#x1f937;&#x200d;&#x2642;&#xfe0f;</li><li>&#x1f937;&#x200d;&#x2642;&#xfe0f;</li><li>Hardcore programmer nerd.</li></ol>



<p>I can&#8217;t speak to anybody on either edge of that spectrum. There is this whole world of people in the <em>middle</em>. They can code, but they aren&#8217;t computer science people. They are <em>get the job done</em> people. Maybe it&#8217;s something like this:</p>



<ol><li>Pick out a theme that will work, use it. </li><li>Start with a theme, customize it a bit using built-in tools.</li><li>Start with a theme, hack it up with code to do what you need it to do.</li><li>Start from scratch, build out what you need.</li><li>Start from scratch, build a highly customized site.</li><li>Hardcore programmer nerd.</li></ol>



<p>I&#8217;ve always been somewhere around #4, and I think that&#8217;s a nice sweet spot. I try to let off-the-shelf WordPress and big popular plugins do the heavy lifting, but I&#8217;ll bring-my-own front-end (HTML, CSS, and JavaScript) and customize what I have to. I&#8217;m making templates. I&#8217;m writing queries. I&#8217;m building blocks. I&#8217;m modularizing where I can. </p>



<p>I feel powerful in that zone. I can build a lot of sites that way, almost by myself. <strong>So where are the resources <em>today</em> that help you learn this kind of WordPress theme development? </strong>Lemme see what I can find.</p>



<h3>Wing it, old school</h3>



<p>There is something to be said for learning by doing. Trial by fire. I&#8217;ve learned a lot under these circumstances in my life. </p>



<p>The trick here is to get WordPress installed on a live server and then play with the settings, plugins, customizer, and edit the theme files themselves to make the site do things. You&#8217;ll find HTML in those theme files — hack it up! You&#8217;ll see PHP code spitting out content. Can you tell what and how to manipulate it? You&#8217;ll find a CSS file in the theme — edit that sucker! </p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/02/theme-hackin.png?ssl=1" alt="" class="wp-image-303337" data-recalc-dims="1"/><figcaption>Editing a WordPress theme and seeing what happens</figcaption></figure>



<p>The official documentation can help you somewhat here:</p>



<ul><li><a href="https://wordpress.org/support/article/how-to-install-wordpress/">How to install WordPress</a></li><li><a href="https://developer.wordpress.org/">Developer Resources</a></li><li>Google stuff when you get stuck</li></ul>



<p>To some degree, I&#8217;m a fan of <em>doing it live</em> (on a production website) because it lends a sense of <em>realness</em> to what you are doing when you are a beginner. The stakes are high there, giving you a sense of the power you have. <em>When I make these changes, they are for anyone in the world with an internet connection to see. </em></p>



<p>I did this in my formative years by buying a domain name and hosting, installing WordPress on that hosting, logging into it with SFTP credentials, and literally working on the live files. I used <a href="https://panic.com/coda/">Coda</a>, which is still a popular app, and is being actively developed into a new version of itself as I write.</p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/02/nova.png?ssl=1" alt="" class="wp-image-303289" data-recalc-dims="1"/><figcaption>This is Nova, a MacOS code editor from Panic that has SFTP built-in.</figcaption></figure>



<p>Hopefully, the stakes are real but <em>low</em>. Like you&#8217;re working on a pet project or your personal site. At some point, hacking on production sites becomes too dangerous of an idea. One line of misplaced PHP syntax can take down the entire site.</p>



<p>If you&#8217;re working on something like a client site, you&#8217;ll need to upgrade that workflow.</p>



<h3>Modern winging it</h3>



<p>The modern, healthy, standard way for working on websites is:</p>



<ol><li>Work on them <em>locally</em>.</li><li>Use version control (<a href="https://git-scm.com/">Git</a>), where new work is done in branches of the <code>master</code> branch. </li><li>Deployment to the production website is done when code is pushed to the <code>master</code> branch, like your development branch is merged in.</li></ol>



<p>I&#8217;ve done <a href="https://css-tricks.com/video-screencasts/177-local-wordpress-development-to-production-workflow/">a recent video on this whole workflow</a> as I do it today. My toolset is:</p>



<ul><li>Work locally with <a href="https://localbyflywheel.com/">Local by Flywheel</a>. </li><li>My web hosting is also <a href="https://share.getf.ly/k96n2f">Flywheel</a>, but that isn&#8217;t required. It could be anything that gives you SFTP access and runs what WordPress needs: Apache, PHP, and MySQL. Disclosure, Flywheel is a sponsor here, but because I like them and their service :).</li><li>Code is hosted on a private repo on GitHub.</li><li>Deployment to the Flywheel hosting is done by <a href="https://buddy.works/">Buddy</a>. Buddy watches for pushes to the <code>master</code> branch and moves the files over SFTP to the production site.</li></ul>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/02/flywheel.png?ssl=1" alt="" class="wp-image-303290" data-recalc-dims="1"/><figcaption>Local by Flywheel</figcaption></figure>



<p>Now that you have a <em>local</em> setup, you can go nuts. Do whatever you want. You can&#8217;t break anything on the live site, so you&#8217;re freer to make experimental changes and just see what happens. </p>



<p>When working locally, it&#8217;s likely you&#8217;ll be editing files with a code editor. I&#8217;d say the most popular choice these days is the free <a href="https://code.visualstudio.com/">VS Code</a>, but there is also <a href="https://atom.io/">Atom</a> and <a href="https://www.sublimetext.com/">Sublime</a>, and fancier editors like <a href="https://www.jetbrains.com/phpstorm/">PhpStorm</a>. </p>



<p>The freedom of hacking on files is especially apparent once you&#8217;ve pushed your code up to a Git repo. Once you&#8217;ve done that, you have the freedom of <em>reverting</em> files back to the state of the last push. </p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/02/Screen-Shot-2020-02-06-at-7.15.08-AM.png?ssl=1" alt="" class="wp-image-303292" data-recalc-dims="1"/></figure>



<p>I use the Git software <a href="https://www.git-tower.com/mac">Tower</a>, and that lets me can see what files have changed since I last committed code. If I&#8217;ve made a mistake, caused a problem, or done something I don&#8217;t like — even if I don&#8217;t remember exactly what I changed — I can <em>discard</em> those changes back to their last state. That&#8217;s a nice level of freedom. </p>



<p>When I <em>do</em> commit code, to master or by merging a branch into <code>master</code>, that&#8217;s when Buddy kicks in and deploys the changes to the production site. </p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/02/buddy.png?ssl=1" alt="" class="wp-image-303293" data-recalc-dims="1"/><figcaption>CSS-Tricks itself is a WordPress site, which has continuously evolved over 13 years.</figcaption></figure>



<h3>But like, where do you start?</h3>



<p>We&#8217;re talking about WordPress theme development here, so you start with a theme. Themes are literally folders of files in your WordPress installation.</p>



<pre rel="HTML" class="wp-block-csstricks-code-block language-markup" data-line=""><code markup="tt">root
  - /wp-content/
    - /themes/
       - /theme-name/</code></pre>



<p>WordPress comes with some themes right out of the box. As I write, the <a href="https://wordpress.org/themes/twentytwenty/">Twenty Twenty</a> theme ships with WordPress, and it&#8217;s a nice one! You could absolutely start your theme hackin&#8217; on that. </p>



<p>Themes tend to have some opinions about how they organize themselves and do things, and Twenty Twenty is no different. I&#8217;d say, perhaps controversially, that there is no <em>one true way</em> to organize your theme, so long as it&#8217;s valid code and does things the &#8220;WordPress&#8221; way. This is just something you&#8217;ll have to get a feel for as you make themes. </p>



<h3>Starter themes</h3>



<p>Starter themes were a very popular way to start building a theme from scratch in my day. I don&#8217;t have a good sense if that&#8217;s still true, but the big idea was a theme with all the basic theme templates you&#8217;ll need (single blog post pages, a homepage, a 404 page, search results page, etc.) with very little markup and no styling at all. That way you have an empty canvas from which to build out all your HTML, CSS, and JavaScript yourself to your liking. Sorta like you&#8217;re building any other site from scratch with these core technologies, only with some PHP in there spitting out content.</p>



<p>There was a theme called <a href="https://elliotjaystocks.com/blog/starkers-grows-up/">Starkers</a> that was popular, but it&#8217;s dead now. I made one called <a href="https://digwp.com/2010/02/blank-wordpress-theme/">BLANK</a> myself but haven&#8217;t touched that in a long time. In looking around a bit, I found some newer themes with this same spirit. Here&#8217;s the best three I found:</p>



<ul><li><a href="http://html5blank.com/">HTML5 Blank</a></li><li><a href="https://wordpress.org/themes/blankslate/">BlankSlate</a></li><li><a href="https://underscores.me/">_s</a> (&#8220;Underscores&#8221;)</li></ul>



<p>I can&#8217;t personally vouch for them, but they&#8217;ve all been updated somewhat recently and look like pretty good starting points to me. I&#8217;d give them a shot in the case that I was starting from absolute scratch on a project. I&#8217;d be tempted to download one and then spruce it up exactly how I like it and save <em>that</em> as my own starter in case I needed to do it again.</p>



<p>It feels worth mentioning that a lot of web development <em>isn&#8217;t</em> starting from scratch, but rather working on existing projects. In that case, the process is still getting a local environment set up; you just aren&#8217;t starting from scratch, but with the existing theme. I&#8217;d suggest duplicating the theme and changing the name while you hack on it, so even if you deploy it, it doesn&#8217;t affect the live theme. Others might suggest using the starter as a &#8220;parent&#8221; theme, then branching off into a <a href="https://developer.wordpress.org/themes/advanced-topics/child-themes/">&#8220;child&#8221; theme</a>.</p>



<p>To get your local development environment all synced up with exactly what the production website is like, I think the best tool is <a href="https://aff.deliciousbrains.com/idevaffiliate.php?id=21133">WP DB Migrate Pro</a>, which can yank down the production database to your local site and all the media files (paid product and a paid add-on, worth every penny).</p>



<h3>Fancier Starter Themes</h3>



<p>Rather than starting from absolute scratch, there are themes that come with sensible defaults and even modern build processes for you start with. The idea is that building a site with essentially raw HTML, CSS, and JavaScript, while entirely doable, just doesn&#8217;t have enough modern conveniences to be comfortable. </p>



<p>Here are some.</p>



<ul><li>Morten Rand-Hendriksen&nbsp;has a project called <a href="https://wprig.io/">WP Rig</a> that has all sorts of developer tools built into it. A Gulp-based build process spins up a BrowserSync server for auto updating. JavaScript gets processed in Babel. CSS gets processed in PostCSS, and code is linted. He <a href="https://www.linkedin.com/learning/wordpress-building-progressive-themes-with-wp-rig-2">teaches WordPress</a> with it.</li><li><a href="https://roots.io/">Roots</a> makes a theme called <a href="https://roots.io/sage/">Sage</a> that comes with a templating engine, your CSS framework of choice, and <a href="https://roots.io/sage-vs-underscores/">fancy</a> build process stuff.</li><li><a href="https://ignition.press/">Ignition</a> has a build process and all sorts of helpers.</li><li><a href="https://www.upstatement.com/timber/">Timber</a> comes with a templating engine and a bunch of code helpers.</li></ul>



<p>I think all these are pretty cool, but are also probably not for just-starting-out beginner developers. </p>



<h3>Books</h3>



<p>This is tough because of how many there are. In a quick Google search, I found one site selling <em>fifteen</em> WordPress books as a bundle for $9.99. How would you even know where to start? How good can they be for that rock bottom price? I dunno. </p>



<p>I wrote a book with Jeff Starr ages ago called <a href="https://digwp.com/">Digging Into WordPress</a>. After all these years, Jeff still keeps the book up to date, so I&#8217;d say that&#8217;s a decent choice! Jeff has other books like <a href="https://wp-tao.com/">The Tao of WordPress</a> and <a href="https://wp-tao.com/wordpress-themes-book/">WordPress Themes In Depth</a>.</p>



<p>A lot of other books specifically about WordPress theme development are just fairly old. 2008-2015 stuff. Again, not that there isn&#8217;t anything to be learned there, especially as WordPress doesn&#8217;t change that rapidly, but still, I&#8217;d want to read a book more recent that half a decade old. Seems like a big opportunity for a target audience as large as WordPress users and developers. Or if there is already stuff that I&#8217;m just not finding, lemme know in the comments.</p>



<p>Perhaps learning is shifting so much toward online that people don&#8217;t write books as much&#8230;</p>



<h3>Online learning courses</h3>



<p>Our official learning partner Frontend Masters has one course on WordPress focused on <a href="https://frontendmasters.com/courses/javascript-wordpress/?utm_source=css-tricks&amp;utm_medium=website&amp;utm_campaign=css-tricks-tags-sidebar">JavaScript and WordPress</a>, so that might not be quite perfect for learning the basics of theme development. Still, fascinating stuff. </p>



<p>Here&#8217;s some others that looked good to me while looking around:</p>



<ul><li>SuperHi: <a href="https://www.superhi.com/courses/wordpress">WordPress</a> </li><li>Chris Dixon: <a href="https://chrisdixon.io/p/wordpress-5-theme-development-academy-with-bootstrap-v4">WordPress 5 Theme Development Academy with Bootstrap v4</a> </li><li>WPSHOUT: <a href="https://wpshout.com/courses/learn-wordpress-development-the-basic-course/">The Basic Course</a></li><li><a href="https://www.youtube.com/channel/UC8eV_x9GaQhcoL4rexOJpXg/videos">WPCasts</a> (free on YouTube)</li><li><a href="https://knowthecode.io/">Know The Code</a> which teaches with specific theme frameworks.</li><li>Udemy: Zac Gordon&#8217;s <a href="https://www.udemy.com/course/wordpress-theme-and-plugin-development-course/">Complete WordPress Theme &amp; Plugin Development Course</a></li></ul>



<p>Zac&#8217;s course looks like the most updated and perhaps the best option there. </p>



<h3>A totally different direction for theme Development</h3>



<p>One way to build a site with WordPress is not to use WordPress themes at all! Instead, you can use the WordPress API to suck data out of WordPress and build a site however the heck you please.</p>



<ul><li><a href="https://developer.wordpress.org/rest-api/">The WordPress REST API</a> (built-in!) which you could use to do <a href="https://www.smashingmagazine.com/2020/02/headless-wordpress-site-jamstack/">something like this</a>. </li><li><a href="https://css-tricks.com/gatsby-and-wordpress/">Gatsby and WordPress</a></li><li>Use GraphQL instead of REST with <a href="https://github.com/wp-graphql/wp-graphql">wp-graphql</a>. </li></ul>



<p>This idea of decoupling the CMS and the front end you build is pretty neat. It&#8217;s often referred to as using a &#8220;headless&#8221; CMS. It&#8217;s not for everyone. (One big reason is that, in a way, it doubles your <a href="https://css-tricks.com/defining-and-dealing-with-technical-debt/">technical debt</a>.). But it can bring a freedom to both the CMS and the front end to evolve independently.<br></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/where-to-learn-wordpress-theme-development/">Where to Learn WordPress Theme Development</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/where-to-learn-wordpress-theme-development/feed/</wfw:commentRss>
			<slash:comments>4</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">302979</post-id>	</item>
		<item>
		<title>Gutenberging</title>
		<link>https://css-tricks.com/gutenberging/</link>
					<comments>https://css-tricks.com/gutenberging/#comments</comments>
		
		<dc:creator><![CDATA[Chris Coyier]]></dc:creator>
		<pubDate>Mon, 24 Feb 2020 14:41:16 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[gutenberg]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=302758</guid>

					<description><![CDATA[<p>It&#8217;s been over a year since the big WordPress launch of <a href="https://wordpress.org/gutenberg/">Gutenberg</a>, the new editor. It seems to me most of the controversy around it has died down. There has been enough time that the UX and accessibility of it have improved, and people are seeing the potential a lot more clearly. There ain&#8217;t no turning back.</p>
<p>I&#8217;m running across articles like Haris Zulfiqar saying he&#8217;s <a href="https://hariszulfiqar.com/why-am-i-betting-on-gutenberg/">betting on it</a> and Nick Hamze saying that blocks are <a href="https://block.garden/for-the-future/">for the next </a>&#8230; <a href="https://css-tricks.com/gutenberging/" class="read-more">Read article <span class="screen-reader-text"> &#8220;Gutenberging&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/gutenberging/">Gutenberging</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>It&#8217;s been over a year since the big WordPress launch of <a href="https://wordpress.org/gutenberg/">Gutenberg</a>, the new editor. It seems to me most of the controversy around it has died down. There has been enough time that the UX and accessibility of it have improved, and people are seeing the potential a lot more clearly. There ain&#8217;t no turning back.</p>



<p>I&#8217;m running across articles like Haris Zulfiqar saying he&#8217;s <a href="https://hariszulfiqar.com/why-am-i-betting-on-gutenberg/">betting on it</a> and Nick Hamze saying that blocks are <a href="https://block.garden/for-the-future/">for the next generation</a>. </p>



<p>While I think there are still rough edges (like why can&#8217;t I put a list in a blockquote? Why can&#8217;t I add a class to a link? Why can&#8217;t I arrow-key through the block chooser?), I&#8217;m a big fan overall. And not just conceptually anymore. <a href="https://css-tricks.com/thank-you-2019-edition/#article-header-id-8">I made it one of my 2020 goals</a> to get CSS-Tricks onto Gutenberg, and so I hopped to that right away in January.</p>



<span id="more-302758"></span>



<h3>We already had one foot in the door</h3>



<p>We had a smidge of experience Gutenberging since we had already <a href="https://css-tricks.com/a-gutenburg-powered-newsletter/">converted the newsletter authoring experience</a> over to the new editor. Our newsletters are a Custom Post Type here on CSS-Tricks, which are published here at public URLs, have a custom RSS feed, and sent out by MailChimp which fetches and reads that RSS feed.</p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/01/newsletter.png?resize=1024%2C607&#038;ssl=1" alt="" class="wp-image-302772" data-recalc-dims="1"/></figure>



<p>We were able to just turn on Gutenberg for newsletters by way of the <a href="https://github.com/Automattic/gutenberg-ramp">Gutenberg Ramp</a> plugin. That works great for Custom Post Types and posts with individual IDs, but I wanted to turn on Gutenberg <em>only for new content</em>. I wound up monkey-patching the plugin. <a href="https://github.com/Automattic/gutenberg-ramp/pull/82/files">Here&#8217;s a pull request</a> in case anyone over there thinks it&#8217;s a good idea.  </p>



<p>This was important to me, as we have tens of thousands of old posts created with the old editor, and even though Gutenberg doesn&#8217;t mangle them if we open them up for editing, the editor experience it provides for them isn&#8217;t as good as the &#8220;classic&#8221; editor (e.g. we have special buttons for our special code blocks and stuff like that). </p>



<h3>Dealing with older content</h3>



<p>What would really be great is if Gutenberg would convert old posts into proper blocks upon opening, but that feels like a dream at this point. Like, it would have to parse the HTML, identify what chunks look like blocks, identify <em>which</em> block makes the most sense, including our <em>custom</em> blocks which are the most important, and be <em>really correct</em> about it in a non-fragile way. </p>



<p>For now, old content just uses the old editor. There isn&#8217;t even an easy way to flip on Gutenberg for an individual post from the editor. (I could hard-code values into the Gutenberg Ramp usage, but that&#8217;s a bit tedious.)</p>



<figure class="wp-block-image size-large"><img src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2020/01/old-editor-1024x716.png?resize=1024%2C716&#038;ssl=1" alt="" class="wp-image-302797" data-recalc-dims="1"/></figure>



<p>I worry a smidge that the old editor will really deteriorate. For example, one of the big reasons I got started with this is because, on this site, the old editor would just randomly scroll to the bottom of the page. I can&#8217;t for the life of me figure out why, but it makes authoring obnoxious for me. Just a little papercut bug that made me want to get on the editor experience that is being actively developed.</p>



<p>But even if the old editor really gets bad, just flipping on Gutenberg for everything isn&#8217;t that bad. All the old content will just be in a big &#8220;classic&#8221; block and will be fine.</p>



<h3>So anyway — it&#8217;s working! </h3>



<p>Turning on Gutenberg for new posts was its own little challenge, but it&#8217;s turned on for us and we&#8217;re creating all new content in it. I&#8217;m just speaking for myself here but <strong>OMG I love it so much.</strong> It&#8217;s such a massive upgrade for writing content that I&#8217;m a little obsessed with it. The team is happy as well.</p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/01/turned-on.png?resize=1024%2C603&#038;ssl=1" alt="" class="wp-image-302780" data-recalc-dims="1"/></figure>



<h3>Creating custom blocks</h3>



<p>Check out this fancy text block we have:</p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/01/Screen-Shot-2020-01-27-at-1.06.56-PM.png?resize=1024%2C465&#038;ssl=1" alt="" class="wp-image-302781" data-recalc-dims="1"/><figcaption>A &#8220;callout&#8221; block on CSS-Tricks</figcaption></figure>



<p>You might think, oh cool, an opportunity for a custom block. Heck, we even covered learning and <a href="https://css-tricks.com/guides/learning-gutenberg/">making Gutenberg blocks in a whole big series</a>. But this brings up a pretty relevant situation: <strong>when <em>not</em> to build a block</strong>. The only thing unique about <em>this</em> block is that is has a special class name that our CSS uses to style that block. That&#8217;s it. Adding a class name is <strong>a built-in feature</strong> of every block, so a custom block here really isn&#8217;t necessary. </p>



<figure class="wp-block-image size-large"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/01/add-class-to-block.png?resize=1024%2C340&#038;ssl=1" alt="" class="wp-image-302788" data-recalc-dims="1"/></figure>



<p>In fact, we can go a step further, and make a text block with this exact class a <strong>&#8220;reusable block&#8221;</strong> so we don&#8217;t even have to remember or type in that class name. After I&#8217;ve created a text block with this class, I select &#8220;Convert to Reusable Block&#8221; from the kebab menu and now it&#8217;s forever saved as a reusable block.</p>



<div class="wp-block-image"><figure class="aligncenter size-large is-resized"><img src="https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/01/reusable-blocks.png?resize=364%2C230&#038;ssl=1" alt="" class="wp-image-302790" width="364" height="230" data-recalc-dims="1" /></figure></div>



<p>We&#8217;re already using it for a few other things now, like our &#8220;Article Series&#8221; block (an <code>&lt;h4&gt;</code> and <code>&lt;ol&gt;</code> with a special <code>&lt;div&gt;</code>-with-a-class wrapper) and footnote blocks and such.</p>



<p>But we do actually need some custom blocks as well, and for that I used <a href="https://github.com/ahmadawais/create-guten-block">create-guten-block</a> to craft a special plugin<a href="#fn:1">¹</a> to create them. I see One that is mega important for us is code blocks. There is already a native block for code blocks. It essentially puts the code in a <code>&lt;pre&gt;</code> tag and the content from Gutenberg is already escaped by default.</p>



<p>Our fancy code block allows us to pick which language it is, highlight certain lines, and provide custom labels. This was all possible in our old editor via HTML attributes, so this block is just nice UI on top of all that. </p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/01/code-block.png?resize=1024%2C377&#038;ssl=1" alt="" class="wp-image-302791" data-recalc-dims="1"/></figure>



<p>That block is so specific to CSS-Tricks it doesn&#8217;t make much sense to open source it. But there is another block I created that is open source, and that&#8217;s the <a href="https://wordpress.org/plugins/codepen-embed-block/">CodePen Embed Block</a>. I <a href="https://blog.codepen.io/2020/01/22/a-gutenberg-block-for-codepen-embeds-on-wordpress/">wrote about it</a> over on the CodePen blog. </p>



<p>It allows you to paste in a CodePen URL and it transforms into a CodePen Embed. oEmbed already does that by default, but with this plugin, you can control everything like the height, theme, and default tabs.</p>



<figure class="wp-block-image size-large"><img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/01/embed-admin.png?resize=1024%2C619&#038;ssl=1" alt="" class="wp-image-302792" data-recalc-dims="1"/></figure>



<p>It&#8217;s pretty awesome to actually see the embedded Pens while authoring!</p>



<h3>Unfaced challenges</h3>



<p>The biggest challenge right now is handling images. In the old editor, we have integrated <a href="https://css-tricks.com/video-screencasts/155-responsive-images-wordpress-cloudinary/">a very very fancy setup</a> with <a href="https://cloudinary.com/">Cloudinary</a>. The images are automatically uploaded to Cloudinary, breakpoints are programmatically decided on, multiple sizes are created, a responsive images syntax is created, and what ends up in the HTML is a perfect responsive images syntax with the images hosted by Cloudinary. This has the provided us with the benefit of being on a CDN and serving the images in the best possible format as well.</p>



<p>None of that is happening on posts created with Gutenberg. &#x1f62d;</p>



<p>I need to find or develop a new system that does a great job with images everywhere on the site and ideally with a less bespoke system that is easier to maintain. It&#8217;s possible I figure that out with Cloudinary, I might try some other service, I might let WordPress deal with it directly backed by the <a href="https://jetpack.com/support/site-accelerator/">Jetpack Site Accelerator</a>. Not sure yet. Always something to do. </p>



<div class="wp-block-group footnotes" id="fn:1"><div class="wp-block-group__inner-container">
<ol><li>I see WordPress themselves is getting in on the block scaffolding game. Their &#8220;create-wordpress-block&#8221; concept has made its way into <a href="https://github.com/wordpress/gutenberg/">the Gutenberg repo</a> itself, which you kick off with <code>npm init @wordpress/block [options] [slug]</code></li></ol>
</div></div>
<p>The post <a rel="nofollow" href="https://css-tricks.com/gutenberging/">Gutenberging</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/gutenberging/feed/</wfw:commentRss>
			<slash:comments>13</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">302758</post-id>	</item>
		<item>
		<title>How to Build Vue Components in a WordPress Theme</title>
		<link>https://css-tricks.com/how-to-build-vue-components-in-a-wordpress-theme/</link>
					<comments>https://css-tricks.com/how-to-build-vue-components-in-a-wordpress-theme/#comments</comments>
		
		<dc:creator><![CDATA[Jonathan Land]]></dc:creator>
		<pubDate>Tue, 18 Feb 2020 15:27:58 +0000</pubDate>
				<category><![CDATA[Article]]></category>
		<category><![CDATA[vue]]></category>
		<category><![CDATA[vue components]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=303245</guid>

					<description><![CDATA[<p>The inline-template directive allows us to build rich Vue components as a progressive enhancement over existing WordPress markup.</p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-build-vue-components-in-a-wordpress-theme/">How to Build Vue Components in a WordPress Theme</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p class="explanation">Intrigued by the title and just wanna see some code?&nbsp;<a href="#lets-do-this">Skip ahead</a>.</p>



<p>A few months ago,&nbsp;I was building a WordPress website that required a form with a bunch of fancy conditional fields. Different options and info were required for different&nbsp;choices you could make on the form,&nbsp;and our client needed complete control over all fields <sup><a href="#footnotes">1</a></sup>. In addition,&nbsp;the form needed to appear in multiple places in each page, with slightly different configs.</p>



<p><em>And</em>&nbsp;the header instance of the form needed to be mutually exclusive with the hamburger menu, so&nbsp;that&nbsp;opening one closes the other.</p>



<p><em>And</em>&nbsp;the form had text content that was relevant to SEO.</p>



<p><em>And</em> we wanted the server response to present some cute animated feedback.</p>



<p>(Phew.)</p>



<p>The whole thing felt complex enough that I didn&#8217;t want to handle all that state manually. I remembered reading Sarah Drasner’s article&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://www.smashingmagazine.com/2018/02/jquery-vue-javascript/">&#8220;Replacing&nbsp;jQuery With Vue.js: No Build Step Necessary”</a>&nbsp;which shows how to replace classic jQuery patterns with simple Vue micro-apps. That seemed like a good place to start, but I quickly realized that things would get messy on the PHP side&nbsp;of WordPress.</p>



<p>What I really needed were&nbsp;<strong>reusable components</strong>.&nbsp;</p>



<span id="more-303245"></span>



<h3>PHP → JavaScript</h3>



<p>I love the static-first approach of&nbsp;Jamstack&nbsp;tools,&nbsp;like&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://nuxtjs.org/">Nuxt</a>, and was looking to do something similar here — send the full content from the server, and progressively enhance on the client side.</p>



<p>But&nbsp;PHP doesn’t have a built-in way to work with components. It does, however, support <code>require</code>-ing files inside other files <sup><a href="#footnotes">2</a></sup>. WordPress has an abstraction of <code>require</code> called <code><a rel="noreferrer noopener" href="https://developer.wordpress.org/reference/functions/get_template_part/">get_template_part</a></code>, that runs relative to the theme folder and is easier to work with. Dividing code into template parts is about&nbsp;the&nbsp;closest thing to components that&nbsp;WordPress provides <sup><a href="#footnotes">3</a></sup>.</p>



<p>Vue, on the other hand, is all about components&nbsp;—&nbsp;but it can only do its thing&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://kryogenix.org/code/browser/everyonehasjs.html">after the page has loaded and JavaScript&nbsp;is running</a>.</p>



<p>The secret to this marriage of paradigms turns&nbsp;out to be the lesser-known Vue directive&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://vuejs.org/v2/guide/components-edge-cases.html#Inline-Templates"><code>inline-template</code></a>.&nbsp;Its&nbsp;great and wonderful powers allow us to define a Vue component using the&nbsp;<em>markup we already have</em>. It’s the perfect middle ground between getting static HTML from the server, and mounting dynamic DOM elements in the client.</p>



<p>First,&nbsp;the browser gets the HTML, then Vue makes it do stuff. Since the markup is built by WordPress, rather than by Vue in the browser, components can easily use any information&nbsp;that&nbsp;site&nbsp;administrators&nbsp;can edit. And, as opposed to&nbsp;.vue&nbsp;files (which&nbsp;are great for building more app-y things), we can keep the same separation of concerns we use for the whole site&nbsp;—&nbsp;structure and content in PHP, style in CSS, and functionality in JavaScript.</p>



<p>To show how&nbsp;this&nbsp;all fits together, we’re going to build a few features for a recipe blog. First, we’ll add a way for users to rate recipes. Then we’ll build a feedback form based on that rating. Finally,&nbsp;we’ll allow users to filter recipes, based on tags and&nbsp;rating.</p>



<p>We’ll build&nbsp;a few components that share state and&nbsp;live on the same page. To get them to play nicely&nbsp;together&nbsp;—&nbsp;and to make it easy to add additional components in the future&nbsp;—&nbsp;we’ll make the whole page our Vue app, and register components inside it.</p>



<p>Each component will live in its own PHP file and be included in the theme using&nbsp;<code>get_template_part</code>.</p>



<h3 id="lets-do-this">Laying the groundwork</h3>



<p>There are a few special considerations&nbsp;to take into account&nbsp;when applying Vue to existing pages. The first is that Vue doesn&#8217;t want you loading&nbsp;scripts inside it&nbsp;— it&nbsp;will send ominous errors to the console if you do. The easiest way to avoid this&nbsp;is to add a&nbsp;wrapper element around the&nbsp;content&nbsp;for every page,&nbsp;then&nbsp;load scripts outside&nbsp;of&nbsp;it&nbsp;(which&nbsp;is already a common pattern for all kinds of reasons). Something like this:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php /* header.php */ ?>

&lt;body &lt;?php body_class(); ?>>
&lt;div id="site-wrapper"></code></pre>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php /* footer.php */ ?> 

&lt;/div> &lt;!-- #site-wrapper -->
&lt;?php wp_footer(); ?></code></pre>



<p>The second&nbsp;consideration&nbsp;is that Vue has to be called at the end of&nbsp;body element&nbsp;so that it will load&nbsp;<em>after</em>&nbsp;the rest of the DOM is available to parse. We’ll pass&nbsp;true&nbsp;as the&nbsp;fifth&nbsp;argument&nbsp;&nbsp;(<code>in_footer</code>)&nbsp;for the&nbsp;<a rel="noreferrer noopener" href="https://developer.wordpress.org/reference/functions/wp_enqueue_script/"><code>wp_enqueue_script</code></a>&nbsp;&nbsp;function. Also, to make sure Vue is loaded first, we’ll register it as a dependency of the main script.</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php // functions.php

add_action( 'wp_enqueue_scripts', function() {
  wp_enqueue_script('vue', get_template_directory_uri() . '/assets/js/lib/vue.js', null, null, true); // change to vue.min.js for production
  wp_enqueue_script('main', get_template_directory_uri() . '/assets/js/main.js', 'vue', null, true);</code></pre>



<p>Finally, in the main script,&nbsp;we’ll initialize Vue on the&nbsp;<code>site-wrapper</code>&nbsp;element.</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">// main.js

new Vue({
  el: document.getElementById('site-wrapper')
})</code></pre>



<h3>The star rating component</h3>



<p>Our single post template currently looks like this:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php /* single-post.php */ ?>

&lt;article class="recipe">
  &lt;?php /* ... post content */ ?>

  &lt;!-- star rating component goes here -->
&lt;/article></code></pre>



<p>We’ll register the&nbsp;star rating&nbsp;component and add some logic to manage&nbsp;it:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">// main.js

Vue.component('star-rating', {
  data () {
    return {
      rating: 0
    }
  },
  methods: {
    rate (i) { this.rating = i }
  },
  watch: {
    rating (val) {
      // prevent rating from going out of bounds by checking it to on every change
      if (val &lt; 0) 
        this.rating = 0
      else if (val > 5) 
        this.rating = 5

      // ... some logic to save to localStorage or somewhere else
    }
  }
})

// make sure to initialize Vue after registering all components
new Vue({
  el: document.getElementById('site-wrapper')
})</code></pre>



<p>We’ll write the component template in a separate PHP file. The component will comprise six buttons&nbsp;(one&nbsp;for unrated, 5 with stars). Each button will contain an SVG with either a&nbsp;black or transparent&nbsp;fill.</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php /* components/star-rating.php */ ?>

&lt;star-rating inline-template>
  &lt;div class="star-rating">
    &lt;p>Rate recipe:&lt;/p>
    &lt;button @click="rate(0)">
      &lt;svg>&lt;path d="..." :fill="rating === 0 ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
    &lt;button v-for="(i in 5)" @click="rate(i)">
      &lt;svg>&lt;path d="..." :fill="rating >= i ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
  &lt;/div>
&lt;/star-rating></code></pre>



<p class="explanation">As a rule of thumb, I like to give a component’s top element a class&nbsp;name&nbsp;that is&nbsp;identical to that of the component itself. This makes it easy to reason between markup and CSS&nbsp;(e.g.&nbsp;<code>&lt;star-rating&gt;</code>&nbsp;can be thought of as&nbsp;<code>.star-rating</code>).</p>



<p>And now we’ll include it in our page template.</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php /* single-post.php */ ?>

&lt;article class="recipe">
  &lt;?php /* post content */ ?>

  &lt;?php get_template_part('components/star-rating'); ?>
&lt;/article></code></pre>



<p>All the HTML inside the template is valid and understood by the browser, except for&nbsp;<code>&lt;star-rating&gt;</code>. We can go the extra mile to fix that by using Vue’s&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://vuejs.org/v2/api/#is"><code>is</code></a>&nbsp;directive:</p>



<pre rel="PHP" class="language-javascript" data-line="" class="wp-block-csstricks-code-block"><code markup="tt">&lt;div is="star-rating" inline-template>...&lt;/div></code></pre>



<p>Now let’s say that the maximum rating isn’t necessarily 5, but is controllable by the website’s editor using&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://www.advancedcustomfields.com/">Advanced Custom Fields</a>, a popular WordPress plugin that adds custom fields for pages, posts and other WordPress content. All we need to do is inject that value as a prop of the component&nbsp;that we’ll call&nbsp;<code>maxRating</code>:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="6,12"><code markup="tt">&lt;?php // components/star-rating.php

// max_rating is the name of the ACF field
$max_rating = get_field('max_rating');
?>
&lt;div is="star-rating" inline-template :max-rating="&lt;?= $max_rating ?>">
  &lt;div class="star-rating">
    &lt;p>Rate recipe:&lt;/p>
    &lt;button @click="rate(0)">
      &lt;svg>&lt;path d="..." :fill="rating === 0 ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
    &lt;button v-for="(i in maxRating) @click="rate(i)">
      &lt;svg>&lt;path d="..." :fill="rating >= i ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
  &lt;/div>
&lt;/div></code></pre>



<p>And in our script, let’s&nbsp;register the prop and replace the magic number 5:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line="4-9,23-24"><code markup="tt">// main.js

Vue.component('star-rating', {
  props: {
    maxRating: {
      type: Number,
      default: 5 // highlight
    }
  },
  data () {
    return {
      rating: 0
    }
  },
  methods: {
    rate (i) { this.rating = i }
  },
  watch: {
    rating (val) {
      // prevent rating from going out of bounds by checking it to on every change
      if (val &lt; 0) 
        this.rating = 0
      else if (val > maxRating) 
        this.rating = maxRating

      // ... some logic to save to localStorage or somewhere else
    }
  }
})</code></pre>



<p>In order to save the rating of the specific recipe, we’ll need to pass in the ID of the post. Again, same idea:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="6"><code markup="tt">&lt;?php // components/star-rating.php

$max_rating = get_field('max_rating');
$recipe_id = get_the_ID();
?>
&lt;div is="star-rating" inline-template :max-rating="&lt;?= $max_rating ?>" recipe-id="&lt;?= $recipe_id ?>">
  &lt;div class="star-rating">
    &lt;p>Rate recipe:&lt;/p>
    &lt;button @click="rate(0)">
      &lt;svg>&lt;path d="..." :fill="rating === 0 ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
    &lt;button v-for="(i in maxRating) @click="rate(i)">
      &lt;svg>&lt;path d="..." :fill="rating >= i ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
  &lt;/div>
&lt;/div></code></pre>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">// main.js

Vue.component('star-rating', {
  props: {
    maxRating: { 
      // Same as before
    },
    recipeId: {
      type: String,
      required: true
    }
  },
  // ...
  watch: {
    rating (val) {
      // Same as before

      // on every change, save to some storage
      // e.g. localStorage or posting to a WP comments endpoint
      someKindOfStorageDefinedElsewhere.save(this.recipeId, this.rating)
    }
  },
  mounted () {
    this.rating = someKindOfStorageDefinedElsewhere.load(this.recipeId)    
  }
})</code></pre>



<p>Now we can include the same component file in the archive page&nbsp;(a&nbsp;loop of posts), without any additional setup:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php // archive.php

if (have_posts()): while ( have_posts()): the_post(); ?>
&lt;article class="recipe">
  &lt;?php // Excerpt, featured image, etc. then:
  get_template_part('components/star-rating'); ?>
&lt;/article>
&lt;?php endwhile; endif; ?></code></pre>



<h3>The feedback form</h3>



<p>The moment a user rates a recipe is a great opportunity to ask for more feedback, so let’s add a little form that appears right after the rating is set.</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">// main.js

Vue.component('feedback-form', {
  props: {
    recipeId: {
      type: String,
      required: true
    },
    show: { type: Boolean, default: false }
  },
  data () {
    return {
      name: '',
      subject: ''
      // ... other form fields
    }
  }
})</code></pre>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php // components/feedback-form.php

$recipe_id = get_the_ID();
?>
&lt;div is="feedback-form" inline-template recipe-id="&lt;?= $recipe_id ?>" v-if="showForm(recipe-id)">
  &lt;form class="recipe-feedback-form" id="feedback-form-&lt;?= $recipe_id ?>">
    &lt;input type="text" :id="first-name-&lt;?= $recipe_id ?>" v-model="name">
    &lt;label for="first-name-&lt;?= $recipe_id ?>">Your name&lt;/label>
    &lt;?php /* ... */ ?>
  &lt;/form>
&lt;/div></code></pre>



<p class="explanation">Notice that we’re appending a unique string&nbsp;(in&nbsp;this case,&nbsp;<code>recipe-id</code>) to each form element’s&nbsp;ID. This is to make sure they all have unique&nbsp;IDs, even if there are multiple copies of the form on the page.</p>



<p>So, where do we want this form to live? It needs to know the recipe’s rating&nbsp;so it knows it needs to open.&nbsp;We’re just building good ol’ components, so let’s use composition to place the form inside the&nbsp;<code>&lt;star-rating&gt;</code>:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="16"><code markup="tt">&lt;?php // components/star-rating.php

$max_rating = get_field('max_rating');
$recipe_id = get_the_ID();
?>
&lt;div is="star-rating" inline-template :max-rating="&lt;?= $max_rating ?>" recipe-id="&lt;?= $recipe_id ?>">
  &lt;div class="star-rating">
    &lt;p>Rate recipe:&lt;/p>
    &lt;button @click="rate(0)">
      &lt;svg>&lt;path d="..." :fill="rating === 0 ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
    &lt;button v-for="(i in maxRating) @click="rate(i)">
      &lt;svg>&lt;path d="..." :fill="rating >= i ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
    &lt;?php get_template_part('components/feedback-form'); ?>
  &lt;/div>
&lt;/div></code></pre>



<p class="explanation">If at this point you’re thinking,&nbsp;“We&nbsp;really should be composing both components into a single parent component that handles the rating state,” then please&nbsp;give yourself 10 points and wait patiently.</p>



<p>A small progressive enhancement we can add to make the form usable without JavaScript, is to give it the traditional PHP action and then override it in Vue. We’ll use&nbsp;<code>@submit.prevent</code>&nbsp;to prevent the original action, then run a&nbsp;<code>submit</code>&nbsp;method to send the form data in JavaScript.</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="6-7"><code markup="tt">&lt;?php // components/feedback-form.php

$recipe_id = get_the_ID();
?>
&lt;div is="feedback-form" inline-template recipe-id="&lt;?= $recipe_id ?>">
  &lt;form action="path/to/feedback-form-handler.php" 
      @submit.prevent="submit"
      class="recipe-feedback-form" 
      id="feedback-form-&lt;?= $recipe_id ?>">
    &lt;input type="text" :id="first-name-&lt;?= $recipe_id ?>" v-model="name">
    &lt;label for="first-name-&lt;?= $recipe_id ?>">Your name&lt;/label>
   &lt;!-- ... -->
  &lt;/form>
&lt;/div></code></pre>



<p>Then,&nbsp;assuming we want to use&nbsp;<code>fetch</code>,&nbsp;our&nbsp;<code>submit</code>&nbsp;method can be something like&nbsp;this:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">// main.js

Vue.component('feedback-form', {
  // Same as before

  methods: {
    submit () {
      const form = this.$el.querySelector('form')
      const URL = form.action
      const formData = new FormData(form)
      fetch(URL, {method: 'POST', body: formData})
        .then(result => { ... })
        .catch(error => { ... })
    }
  }
})</code></pre>



<p>OK, so what do we want to do in&nbsp;<code>.then</code>&nbsp;and&nbsp;<code>.catch</code>? Let’s add a component that will show real-time feedback for the form’s submit status. First let’s add the state to track sending, success, and failure, and a computed property telling us if we’re pending results.</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line="11-13,23,26,28"><code markup="tt">// main.js

Vue.component('feedback-form', {
  // Same as before

  data () {
    return {
      name: '',
      subject: ''
      // ... other form fields
      sent: false,
      success: false,
​​      error: null
    }
  },
  methods: {
    submit () {
      const form = this.$el.querySelector('form')
      const URL = form.action
      const formData = new FormData(form)
      fetch(URL, {method: 'POST', body: formData})
        .then(result => { 
          this.success = true
         })
        .catch(error => { 
          this.error = error
         })
      this.sent = true
    }
  }
})</code></pre>



<p>To add the markup for each message type&nbsp;(success,&nbsp;failure, pending), we could make another component like the others we’ve built&nbsp;so far. But since these messages are meaningless when the server renders the page, we’re better off rendering them only when necessary. To do this we’re going to place our markup in a native HTML&nbsp;<code><a rel="noreferrer noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template">&lt;template&gt;</a></code>&nbsp;tag, which doesn&#8217;t render anything in the browser. Then we’ll reference it by&nbsp;id&nbsp;as our component’s&nbsp;template.<a rel="noreferrer noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template"></a></p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php /* components/form-status.php */ ?>

&lt;template id="form-status-component" v-if="false">
  &lt;div class="form-message-wrapper">
    &lt;div class="pending-message" v-if="pending">
      &lt;img src="&lt;?= get_template_directory_uri() ?>/spinner.gif">
      &lt;p>Patience, young one.&lt;/p>
    &lt;/div>
    &lt;div class="success-message" v-else-if="success">
      &lt;img src="&lt;?= get_template_directory_uri() ?>/beer.gif">
      &lt;p>Huzzah!&lt;/p>
    &lt;/div>
    &lt;div class="success-message" v-else-if="error">
      &lt;img src="&lt;?= get_template_directory_uri() ?>/broken.gif">
      &lt;p>Ooh, boy. It would appear that: {{ error.text }}&lt;/p>
    &lt;/div>
  &lt;/div
&lt;/template></code></pre>



<p class="explanation">Why add&nbsp;<code>v-if="false"</code>&nbsp;at the top, you ask? It’s a tricky little thing.&nbsp;Once Vue picks up the HTML&nbsp;<code>&lt;template&gt;</code>, it will immediately think of it as a Vue&nbsp;<code>&lt;template&gt;</code>&nbsp;and render it. Unless, you guessed it, we tell Vue&nbsp;<em>not</em>&nbsp;to render it. A bit of a hack, but there you have it.</p>



<p>Since we only need this markup once on the page, we’ll include the PHP component in the footer.</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="4"><code markup="tt">&lt;?php /* footer.php */ ?>

&lt;/div> &lt;!-- #site-wrapper -->
&lt;?php get_template_part('components/form-status'); ?>
&lt;?php wp_footer(); ?></code></pre>



<p>Now we’ll register the component with Vue…</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">// main.js

Vue.component('form-status', {
  template: '#form-status-component'
  props: {
    pending: { type: Boolean, required: true },
    success: { type: Boolean, required: true },
    error: { type: [Object, null], required: true },
  }
})</code></pre>



<p>…and call it inside our form component:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="14"><code markup="tt">&lt;?php // components/feedback-form.php

$recipe_id = get_the_ID();
?>
&lt;div is="feedback-form" inline-template recipe-id="&lt;?= $recipe_id ?>">
  &lt;form action="path/to/feedback-form-handler.php" 
        @submit.prevent="submit"
        class="recipe-feedback-form" 
        id="feedback-form-&lt;?= $recipe_id ?>">
    &lt;input type="text" :id="first-name-&lt;?= $recipe_id ?>" v-model="name">
    &lt;label for="first-name-&lt;?= $recipe_id ?>">Your name&lt;/label>
    &lt;?php // ... ?>
  &lt;/form>
  &lt;form-status v-if="sent" :pending="pending" :success="success" :error="error" />
&lt;/div></code></pre>



<p class="explanation">Since we registered&nbsp;<code>&lt;form-status&gt;</code>&nbsp;using&nbsp;<code>Vue.component</code>, it&#8217;s available globally, without specifically including it in the parent’s&nbsp;<code>components: { }</code>.</p>



<h3>Filtering recipes</h3>



<p>Now that users can personalize some bits of their experience on our blog, we can add all kinds of useful functionality. Specifically, let&#8217;s allow users to set a minimum rating they want to see, using an input at the top of the page.<br>The first thing we need is some global state to track the minimum rating set by the user. Since we started off by initializing a Vue app on the whole page, global state will just be data on the Vue instance:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line="6-8"><code markup="tt">// main.js
// Same as before

new Vue({
  el: document.getElementById('site-wrapper'),
  data: {
    minimumRating: 0
  }
})</code></pre>



<p>And where can we put the controls to change this? Since the whole page is the app, the answer is almost&nbsp;<em>anywhere.</em>&nbsp;For instance, at the top of the archive page:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="3,4"><code markup="tt">&lt;?php /* archive.php */ ?>

&lt;label for="minimum-rating-input">Only show me recipes I've rated at or above:&lt;/label>
&lt;input type="number" id="minimum-rating-input" v-model="minimumRating">

&lt;?php if (have_posts()): while ( have_posts()): the_post(); ?>
&lt;article class="recipe">
  &lt;?php /* Post excerpt, featured image, etc. */ ?>

  &lt;?php get_template_part('components/star-rating'); ?>
&lt;/article>
&lt;?php endwhile; endif; ?></code></pre>



<p>As long as it’s inside our&nbsp;<code>site-wrapper</code>&nbsp;and not inside another component, it’ll just work. If we want,&nbsp;we could also build a filtering component that would change the global state. And if we wanted to get all fancy, we could even&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://vuex.vuejs.org/installation.html">add Vuex</a>&nbsp;to the mix&nbsp;(since&nbsp;Vuex can’t persist state between pages&nbsp;by default, we could add something like&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://championswimmer.in/vuex-persist/">vuex-persist</a>&nbsp;to use&nbsp;<code>localStorage</code>).</p>



<p>So,&nbsp;now we need to hide or show a recipe based on the filter. To do this,&nbsp;we’ll need to wrap the recipe content in its own component, with a&nbsp;<code>v-show</code>&nbsp;directive.&nbsp;It’s probably best to use the same component for both the single page and the archive page. Unfortunately, neither&nbsp;<code>require</code>&nbsp;nor&nbsp;<code>get_template_part</code>&nbsp;can pass parameters into the called file&nbsp;—&nbsp;but we can use&nbsp;<code>global</code>&nbsp;variables:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="7,9"><code markup="tt">&lt;?php /* archive.php */ ?>

&lt;label for="minimum-rating-input">Only show me recipes I've rated at or above:&lt;/label>
&lt;input type="number" id="minimum-rating-input" v-model="minimumRating">

&lt;?php 
$is_archive_item = true;
if (have_posts()): while ( have_posts()): the_post();
  get_template_part('components/recipe-content');
endwhile; endif; ?></code></pre>



<p>We can then use&nbsp;<code>$is_archive_item</code>&nbsp;as a <code>global</code> variable inside the PHP component file&nbsp;to check&nbsp;if it is set and&nbsp;<code>true</code>. Since we won’t need to hide the content on the single post page, we’ll conditionally add the&nbsp;<code>v-show</code>&nbsp;directive.</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">&lt;?php  // components/recipe-content.php

global $is_archive_item; ?>
&lt;div is="recipe-content">
  &lt;article class="recipe" 
    &lt;?php if ($is_archive_item): ?>
       v-show="show"
    &lt;?php endif; ?>
  >
    &lt;?php
    if ($is_archive_item):
      the_excerpt();
    else
      the_content();
    endif;
    
    get_template_part('components/star-rating');
    ?>
  &lt;/article>
&lt;/div></code></pre>



<p class="explanation">In this specific example, we could have also tested with &nbsp;<code>is_archive()</code>&nbsp;inside the component, but in most cases we’ll need to set explicit props.</p>



<p>We’ll need to move the&nbsp;<code>rating</code>&nbsp;state and logic up into the&nbsp;<code>&lt;recipe-content&gt;</code>&nbsp;component so it can know&nbsp;if it needs&nbsp;to hide itself. Inside&nbsp;<code>&lt;star-rating&gt;</code>,&nbsp;we’ll make a custom&nbsp;<code>v-model</code> by replacing&nbsp;rating&nbsp;with&nbsp;<code>value</code>,&nbsp;and&nbsp;<code>this.rating = i</code>&nbsp;with &nbsp;<code>$emit('input', i)</code>&nbsp;as well&nbsp;. So our component registration will now look like&nbsp;this:</p>



<pre rel="JavaScript" class="wp-block-csstricks-code-block language-javascript" data-line=""><code markup="tt">// main.js

Vue.component('recipe-content', {
  data () {
    rating: 0
  },
  watch: {
    rating (val) {
      // ...
    }
  },
  mounted () {
    this.rating = someKindOfStorageDefinedElsewhere.load(this.recipeId)    
  }
})

Vue.component('star-rating', {
  props: {
    maxRating: { /* ... */ },
    recipeId: { /* ... */ },
    value: { type: Number, required: true }
  },
  methods: {
    rate (i) { this.$emit('input', i) }
  },
})</code></pre>



<p>We’ll add&nbsp;<code>v-model</code>&nbsp;in&nbsp;<code>star-rating.php</code>&nbsp;and change&nbsp;<code>rating</code>&nbsp;to&nbsp;<code>value</code>. In addition,&nbsp;we can now move the&nbsp;<code>&lt;feedback-form&gt;</code>&nbsp;up into&nbsp;<code>&lt;recipe-content&gt;</code>:</p>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="10"><code markup="tt">&lt;?php // components/star-rating.php

$max_rating = get_field('max_rating');
$recipe_id = get_the_ID();
?>
&lt;div is="star-rating" 
  inline-template 
  :max-rating="&lt;?= $ max_rating ?>" 
  recipe-id="&lt;?= $recipe_id ?>" 
  v-model="value"
>
  &lt;div class="star-rating">
    &lt;p>Rate recipe:&lt;/p>
    &lt;button @click="rate(0)">
      &lt;svg>&lt;path d="..." :fill="value === 0 ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
    &lt;button v-for="(i in maxRating) @click="rate(i)">
      &lt;svg>&lt;path d="..." :fill="value >= i ? 'black' : 'transparent'">&lt;/svg>
    &lt;/button>
  &lt;/div>
&lt;/div></code></pre>



<pre rel="PHP" class="wp-block-csstricks-code-block language-javascript" data-line="19"><code markup="tt">&lt;?php // components/recipe-content.php

global $is_archive_item; ?>
&lt;div is="recipe-content">
  &lt;article class="recipe" 
    &lt;?php if ($is_archive_item): ?>
       v-show="show"
    &lt;?php endif; ?>
  >
    
    &lt;?php
    if ($is_archive_item):
      the_excerpt();
    else
      the_content();
    endif;
    
    get_template_part('components/star-rating');
    get_template_part('components/feedback-form');
    ?>
  &lt;/article>
&lt;/div></code></pre>



<p>Now everything is set up so the initial render shows all recipes, and then the user can filter them based on their rating. Moving forward,&nbsp;we could add all kinds of parameters to filter content. And it doesn’t have to be based on user input&nbsp;—&nbsp;we can allow filtering based on the content itself&nbsp;(e.g.&nbsp;number of ingredients or cooking time) by passing the data from PHP to Vue.</p>



<h3>Conclusion</h3>



<p>Well, that was a bit of a long ride, but look at what we’ve built:&nbsp;<strong>independent, composable, maintainable, interactive, progressively enhanced components in our WordPress theme</strong>.&nbsp;We brought&nbsp;together the best of all worlds!</p>



<p>I’ve been using this approach in production for a while now, and I love the way it allows me to reason about the different parts of my themes. I hope I’ve inspired you to try it out too.<br></p>



<hr class="wp-block-separator"/>



<div class="wp-block-group footnotes" id="footnotes"><div class="wp-block-group__inner-container">
<ol><li>Of course, two days before launch, the client’s legal department decided they don&#8217;t want to collect all that info. Currently the live form is but a shadow of its development self.</li><li>Fun fact:&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://youtu.be/wCZ5TJCBWMg">Rasmus Lerdorf said</a>&nbsp;that his original intent was for PHP to be templating only, with all business logic handled in C. Let that sink in for a moment. Then clear an hour from your schedule and watch the whole talk.</li><li>There are third-party WordPress templating engines that can compile down to optimized PHP.&nbsp;<a rel="noreferrer noopener" target="_blank" href="https://twig.symfony.com/">Twig</a>, for example, comes to mind. We’re trying to go the reverse route and&nbsp;send vanilla&nbsp;PHP to&nbsp;be handled by&nbsp;JavaScript.</li></ol>
</div></div>
<p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-build-vue-components-in-a-wordpress-theme/">How to Build Vue Components in a WordPress Theme</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/how-to-build-vue-components-in-a-wordpress-theme/feed/</wfw:commentRss>
			<slash:comments>8</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">303245</post-id>	</item>
		<item>
		<title>How To Create A Headless WordPress Site On The Jamstack</title>
		<link>https://www.smashingmagazine.com/2020/02/headless-wordpress-site-jamstack/</link>
					<comments>https://css-tricks.com/how-to-create-a-headless-wordpress-site-on-the-jamstack/#comments</comments>
		
		<dc:creator><![CDATA[Geoff Graham]]></dc:creator>
		<pubDate>Tue, 04 Feb 2020 17:12:53 +0000</pubDate>
				<category><![CDATA[Link]]></category>
		<category><![CDATA[jamstack]]></category>
		<category><![CDATA[netlify]]></category>
		<category><![CDATA[nuxt]]></category>
		<category><![CDATA[static sites]]></category>
		<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://css-tricks.com/?p=303165</guid>

					<description><![CDATA[<p>Just this morning, Chris shared a streamlined way to <a href="https://css-tricks.com/possibly-the-easiest-way-to-run-an-ssg/">get a static site up and running with Netlify</a>. As it happens, Sarah and I also wrote up a little something that expands that idea where <a href="https://www.smashingmagazine.com/2020/02/headless-wordpress-site-jamstack/">a static site can pull content from WordPress using the REST API</a>.</p>
<p>Using Vue, Nuxt, axios, and Netlify, it&#8217;s possible to get both the performance and continuous integration benefits of Jamstack with the powerful publishing and editing features of a CMS. It&#8217;s really &#8230; <a href="https://css-tricks.com/how-to-create-a-headless-wordpress-site-on-the-jamstack/" class="read-more">Read article <span class="screen-reader-text"> &#8220;How To Create A Headless WordPress Site On The Jamstack&#8221;</span></a></p>
<p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-create-a-headless-wordpress-site-on-the-jamstack/">How To Create A Headless WordPress Site On The Jamstack</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>Just this morning, Chris shared a streamlined way to <a href="https://css-tricks.com/possibly-the-easiest-way-to-run-an-ssg/">get a static site up and running with Netlify</a>. As it happens, Sarah and I also wrote up a little something that expands that idea where <a href="https://www.smashingmagazine.com/2020/02/headless-wordpress-site-jamstack/">a static site can pull content from WordPress using the REST API</a>.</p>



<p>Using Vue, Nuxt, axios, and Netlify, it&#8217;s possible to get both the performance and continuous integration benefits of Jamstack with the powerful publishing and editing features of a CMS. It&#8217;s really amazing what pairing different stacks can do these days!</p>



<p>Being a WordPress junkie myself, I learned from a lot from Sarah about setting up a progressive web app and working with a component-driven architecture. She equipped me with several resources, all of which are linked up in the article. There&#8217;s even a complete video where Sarah walks through the same steps we followed to set things up for this app.</p>



<p>In other words, it&#8217;s worth the estimated 18 minutes it takes to read the article. I hope you walk away with as much as I did getting to work on it.</p>
<p><a href="https://www.smashingmagazine.com/2020/02/headless-wordpress-site-jamstack/" title="Direct link to featured article">Direct Link to Article</a> &#8212; <a href="https://css-tricks.com/how-to-create-a-headless-wordpress-site-on-the-jamstack/">Permalink</a></p><p>The post <a rel="nofollow" href="https://css-tricks.com/how-to-create-a-headless-wordpress-site-on-the-jamstack/">How To Create A Headless WordPress Site On The Jamstack</a> appeared first on <a rel="nofollow" href="https://css-tricks.com">CSS-Tricks</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://css-tricks.com/how-to-create-a-headless-wordpress-site-on-the-jamstack/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">303165</post-id>	</item>
	</channel>
</rss>
